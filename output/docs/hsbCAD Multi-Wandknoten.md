# hsbCAD Multi-Wandknoten

## Overview
This script automates the configuration of timber frame wall connections (joints) by detecting geometric relationships between walls and assigning specific construction details or performing cuts. It allows for the connection of up to four walls, automatically calculating joinery codes based on wall positions or allowing manual overrides.

## Usage Environment
| Space | Supported | Notes |
|-------|-----------|-------|
| Model Space | Yes | Script operates on 3D Elements and GenBeams. |
| Paper Space | No | Not designed for 2D layout or Shop Drawing views. |
| Shop Drawing | No | Does not generate shop drawings directly. |

## Prerequisites
- **Required Entities**: At least 2 Elements (typically Timber Frame Walls).
- **Minimum beam count**: 2 Elements (supports up to 4).
- **Required settings**: None.

## Usage Steps

### Step 1: Launch Script
Command: `TSLINSERT` â†’ Select `hsbCAD Multi-Wandknoten.mcr`

### Step 2: Select Primary Elements
```
Command Line: select two elements
Action: Click on the two main walls that form the primary connection (e.g., the corner or T-junction).
```

### Step 3: Select Additional Elements (Optional)
```
Command Line: select additional elements (optional)
Action: If additional walls intersect this group (e.g., a stub wall or fourth side), select them now. Press Enter to finish selection if no more walls are needed.
```

### Step 4: Configure Properties
```
Action: A dynamic dialog appears. Verify or modify the Detail codes (sDet0-3) or visual settings. Click OK to apply.
```

## Properties Panel Parameters

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| Detail Element 1 (sDet0) | Text | "" | Manual override for the construction detail code on the first primary wall. Leave empty to let the script auto-calculate based on geometry. |
| Detail Element 2 (sDet1) | Text | "" | Manual override for the construction detail code on the second primary wall. Leave empty to let the script auto-calculate. |
| Detail Element 3 (sDet2) | Text | "" | Manual override for the construction detail code on the third wall (if selected). |
| Detail Element 4 (sDet3) | Text | "" | Manual override for the construction detail code on the fourth wall (if selected). |
| Dimstyle (sDimStyle) | Dropdown | "_DimStyles" | Selects the visual style for dimensions or markers generated by the script. |
| Color (nColor) | Number | 171 | Sets the color index for debugging vectors and lines drawn by the script. |

## Right-Click Menu Options

| Menu Item | Description |
|-----------|-------------|
| (Standard TSL Menu) | Standard options like Update or Properties are available via the TSL entity context menu. |

## Settings Files
- **Filename**: None
- **Location**: N/A
- **Purpose**: This script relies on internal logic and Element codes; no external settings file is required.

## Tips
- **Automatic Calculation**: If you leave the "Detail Element" properties empty, the script analyzes the wall angles (Corner, T-junction, Parallel) to generate the correct H-code (e.g., W1H1BW2).
- **Manual Override**: If the automatic calculation doesn't match your specific construction method, simply type the correct detail code into the `sDet` properties in the palette.
- **Visualizing Geometry**: The script draws temporary vectors in the color specified by `nColor` (default 171) to help you visualize how it is interpreting the wall directions and intersections.

## FAQ
- **Q: The script didn't cut the studs in my third wall.**
  A: Ensure the third wall was selected during the "select additional elements" prompt. The script only applies geometric cuts to the 3rd and 4th elements if they are physically selected during insertion.
  
- **Q: How do I change the detail after the script is already inserted?**
  A: Select the script instance in the model, open the Properties palette (Ctrl+1), and modify the `sDet` values. Run an Update or recalculation to apply changes.

- **Q: What does the Color property do?**
  A: It controls the color of the helper lines the script draws to show you the intersection points. It does not change the color of your actual wood or beams.