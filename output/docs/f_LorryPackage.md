# f_LorryPackage.mcr

## Overview
This script visualizes stacked timber elements (walls/floors) as a complete transport package. It calculates bounding dimensions, applies edge protection and wrapping details, and generates informational labels for logistics planning and shop drawings.

## Usage Environment
| Space | Supported | Notes |
|-------|-----------|-------|
| Model Space | Yes | Script must be inserted in Model Space. |
| Paper Space | No | Not supported. |
| Shop Drawing | No | Script runs in Model Space, but publishes dimension data for use in shop drawings. |

## Prerequisites
- **Required Entities**: Pre-existing stacked truck entities (TslInst) generated by a stacking script (e.g., `f_Stacking`).
- **Minimum Beam Count**: 0 (Script operates on grouped TslInst).
- **Required Settings**: `hsbTSL\f_Stacking.xml` (Must exist in the Company or Install path to provide wrapping options and display defaults).

## Usage Steps

### Step 1: Launch Script
Command: `TSLINSERT` â†’ Select `f_LorryPackage.mcr` from the list.

### Step 2: Select Stacked Trucks
```
Command Line: Select stacked trucks
Action: Click on the TslInst entities in the model representing the stacks you wish to package.
```
*Note: The script calculates the bounding box based on this selection.*

### Step 3: Configure Package Properties
```
Action: Press Enter to finish selection. The Properties Palette (Ctrl+1) will display the script parameters.
```
Adjust settings such as **Wrapping**, **Edge Protection**, and **Badge Text** as needed. The 3D model updates automatically when properties are changed.

### Step 4: Adjust Visuals (Optional)
```
Action: Right-click the package instance -> select "Badge Display".
```
Use this shortcut to quickly change label colors and transparency without searching through the full properties list.

## Properties Panel Parameters

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| **Wrapping** | |
| Wrapping | dropdown | <Disabled> | Selects the type of packaging material (e.g., Foil, Cardboard) defined in `f_Stacking.xml`. |
| Protection Type 1 | number | 0 mm | Thickness of edge protection for non-rotated elements (e.g., top layer of horizontal stacks). Adds to overall package dimensions. |
| Protection Type 2 | number | 0 mm | Thickness of edge protection for rotated elements (e.g., vertical walls placed on their side). |
| **Display** | |
| Resolution | dropdown | Low Detail | Controls geometric detail. **Low**: Bounding box only (fast). **Medium/High**: Detailed timber profiles (slower). |
| Format | text | @(Truck) | Text template for the package label. Use format variables to auto-generate text. |
| DimStyle | dropdown | First Sorted | The CAD dimension style used for label dimensions. |
| Text Height | number | 0 mm | Height of the label text. Enter **0** to use the height defined in the DimStyle. |
| **Visual Style (Badge)** | |
| Color (Text) | number | 7 | Color of the label text (AutoCAD Color Index). |
| Color (Border) | number | 7 | Color of the box line around the text. |
| Color (Fill) | number | 7 | Background color of the label box. |
| Transparency | number | 90 | Opacity of the background fill (**100** = Invisible/No Fill, **0** = Solid). |

## Right-Click Menu Options

| Menu Item | Description |
|-----------|-------------|
| Badge Display | Opens a simplified dialog to quickly change the Text, Border, and Fill colors/transparency of the package label. |
| Import Settings | Loads wrapping and display settings from `f_Stacking.xml`. |
| Export Settings | Saves current wrapping and display settings to `f_Stacking.xml`. (Prompts to overwrite if file exists). |

## Settings Files
- **Filename**: `hsbTSL\f_Stacking.xml`
- **Location**: Company path or Install path.
- **Purpose**: Defines the list of available wrapping types and stores shared display settings (colors, text styles) for consistency across projects.

## Tips
- **Performance**: If working with a large model containing many packages, set **Resolution** to "Low Detail". This significantly improves regeneration speed by displaying only bounding boxes instead of detailed timber profiles.
- **Label Visibility**: If the package label obscures important geometry, use the **Badge Display** context menu option to increase the **Transparency** to 100 (invisible fill).
- **Transport Planning**: The **Protection Type 1** and **Type 2** values add to the package's physical volume. Ensure these match the actual thickness of corner guards or foam you will use during shipping.

## FAQ
- **Q: Where do I get the options for the Wrapping dropdown?**
  **A:** These are defined in the `f_Stacking.xml` file. You can add custom wrapping types there.
- **Q: My label is missing or too small.**
  **A:** Check the **Text Height** property. If it is set to 0, it uses the DimStyle's text height, which might be too small relative to your model scale.
- **Q: Can I use this script on individual beams?**
  **A:** No, this script is designed to work on `TslInst` entities (groups of elements) that have already been processed by a stacking script.
- **Q: What is the difference between Protection Type 1 and 2?**
  **A:** Type 1 is for the top-most items in a standard horizontal stack. Type 2 is specifically for elements that are rotated (often vertical walls placed on the truck bed).
- **Q: How do I save my color settings for future projects?**
  **A:** Right-click the script instance and choose **Export Settings**. This writes your current configuration to the XML file so other users (or you in new drawings) can use **Import Settings** to load them.