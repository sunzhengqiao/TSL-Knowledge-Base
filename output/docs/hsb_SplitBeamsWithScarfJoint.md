# hsb_SplitBeamsWithScarfJoint.mcr

## Overview
Automatically splits long timber beams into shorter segments joined by a scarf joint (angled overlap) to comply with transport or manufacturing length limitations.

## Usage Environment
| Space | Supported | Notes |
|-------|-----------|-------|
| Model Space | Yes | This script works in the 3D model environment. |
| Paper Space | No | Not applicable for layouts or shop drawings. |
| Shop Drawing | No | Not applicable for 2D drawing generation. |

## Prerequisites
- **Required Entities**: Elements containing GenBeams.
- **Minimum Beam Count**: At least 1 beam within the selected Element that exceeds the maximum length setting.
- **Required Settings**: None.

## Usage Steps

### Step 1: Launch Script
Command: `TSLINSERT` â†’ Select `hsb_SplitBeamsWithScarfJoint.mcr` from the list.

### Step 2: Configure Parameters
```
Dialog: Properties Dialog
Action: Set the desired Maximum Length and Minimum Length for the splits.
Note: This dialog appears automatically when first running the script.
```

### Step 3: Select Elements
```
Command Line: Select a set of elements
Action: Click on the Elements (e.g., walls, roofs) containing the beams you wish to split.
Action: Press Enter to confirm selection and start processing.
```

### Step 4: Processing
The script will automatically:
1. Scan all beams within the selected Elements.
2. Identify beams longer than the "Maximum Length".
3. Split the beams into segments.
4. Apply scarf joint machining to the cut ends.

## Properties Panel Parameters

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| Maximum length | Number | 5000 mm | The maximum permissible length of a single timber piece. Beams longer than this will be split. |
| Minimum length | Number | 2500 mm | The shortest acceptable length for the final beam segment. Prevents creating short, unusable offcuts. |

## Right-Click Menu Options

| Menu Item | Description |
|-----------|-------------|
| None | No specific custom context menu options are defined for this script. Use the Properties Palette to adjust parameters. |

## Settings Files
- **Filename**: None
- **Location**: N/A
- **Purpose**: This script does not use external settings files. All configuration is done via the Properties Panel.

## Tips
- **Profile Restriction**: This script only processes beams with **Rectangular** profiles. Other profile shapes will be ignored.
- **Recursion Safety**: The script includes a safety loop break (at 20 segments) to prevent infinite loops if calculation parameters are invalid.
- **Modifying Joints**: To remove the scarf joint machining, select the split beam and delete the attached TSL instance (usually visible as a script icon near the beam).
- **Min Length Logic**: The script intelligently adjusts the cut position so the very last piece of a long beam is never shorter than the defined Minimum Length.

## FAQ
- **Q: Why did the script not split my beam?**
  **A:** The beam might already be shorter than the "Maximum length" parameter, or it might not have a Rectangular profile.
- **Q: Can I change the angle or size of the scarf joint?**
  **A:** No, the scarf joint geometry (300mm lap size) is hardcoded into the script and cannot be changed via parameters.
- **Q: What happens if I change the parameters after running the script?**
  **A:** Since the script physically splits the beams and creates new instances, changing the OPM parameters on the *existing* split beams will not retroactively re-split or merge them. You must undo the operation and run the script again with new parameters.
- **Q: My beams are split but have no machining (cuts).**
  **A:** Ensure the "Slave" instance of the script generated by the split is not deleted or suppressed. The Master instance splits the beam, and the Slave instance adds the cuts.