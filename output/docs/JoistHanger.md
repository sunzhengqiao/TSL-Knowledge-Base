# JoistHanger.mcr

## Overview
Automates the insertion of proprietary joist hangers (Simpson/USP) at T-connections between joists and carrying beams. It selects the correct model based on joist geometry and profiles, and optionally adds web stiffeners.

## Usage Environment
| Space | Supported | Notes |
|-------|-----------|-------|
| Model Space | Yes | Script must be inserted in Model Space to interact with 3D beams. |
| Paper Space | No | Not supported for layout views. |
| Shop Drawing | No | This is a model detailing script. |

## Prerequisites
- **Required Entities:** GenBeams representing Joists and Carrying/Header Beams.
- **Minimum Beam Count:** 2 (at least one joist and one carrying beam).
- **Required Settings:** A valid MapObject named 'Hangers' (generated by the dependency script `HangerList.mcr`).

## Usage Steps

### Step 1: Launch Script
Command: `TSLINSERT` â†’ Select `JoistHanger.mcr`

### Step 2: Select Joists
```
Command Line: Select Joists, all must be parallel
Action: Select all joist beams that need hangers. Ensure they are parallel to each other.
```

### Step 3: Select Carrying Beams
```
Command Line: Select Carrying Beams
Action: Select the carrying or header beams that support the joists.
```

### Step 4: Automatic Processing
The script will automatically find the T-connections between the selected sets, spawn a hanger instance at each location, and then erase the master script instance.

## Properties Panel Parameters

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| Manufacturer | dropdown | Simpson | Selects the hardware brand (Simpson or USP). This determines the catalog of available hangers. |
| Execution Mode | dropdown | Standard | Determines selection logic. 'Standard' uses beam profile names; 'Manual' uses geometric dimensions. |
| Web Stiffener | dropdown | No | Adds solid wood blocking inside the joist web to reinforce the connection. |
| Backer Block | dropdown | None | Specifies the quantity of backer blocks behind the hanger. (Note: Logic may be disabled in current version). |
| Hanger Color | number | 6 | Sets the AutoCAD color index for the hanger body. |
| General notes | text | | User-defined text for specific installation notes or tagging. |
| Posnum | number | -1 | The Position Number (Mark Number) assigned to this specific hanger instance for fabrication tracking. |

## Right-Click Menu Options

| Menu Item | Description |
|-----------|-------------|
| Update Hanger List | Runs the associated HangerList.mcr script to refresh the local library of available hanger models and manufacturers. |

## Settings Files
- **File Dependency**: `HangerList.mcr`
- **MapObject**: `Hangers`
- **Purpose**: Generates and stores the dictionary of hanger models (geometry and nailing patterns) used by the script. Ensure this is run via the right-click menu if hangers are missing.

## Tips
- Ensure all joists selected in Step 2 are parallel; otherwise, the script may not calculate intersections correctly.
- If the script "self-destructs" (disappears) immediately after insertion, this is normal behavior. The master script spawns individual hangers at the connection points and removes itself.
- If you see an error regarding "Failed to retrieve hanger data," use the right-click menu option **Update Hanger List** to rebuild the manufacturer database.

## FAQ
- **Q: Why did the script disappear after I selected the beams?**
  A: The script functions as a "batch inserter." It calculates the connections, creates the individual hanger objects, and then erases the master script instance to clean up the drawing.
- **Q: How do I switch between Simpson and USP hangers?**
  A: Select a hanger instance in the model, open the Properties Palette (Ctrl+1), and change the **Manufacturer** property.
- **Q: What happens if I change the "Execution Mode"?**
  A: "Standard" tries to match hangers based on the beam's profile name (e.g., TJI). "Manual" searches based purely on the height and width of the beam, which is useful for custom or unknown profiles.