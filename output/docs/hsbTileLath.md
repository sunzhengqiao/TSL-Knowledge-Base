# hsbTileLath.mcr

## Overview
Generates and manages tile lath battens (roofing battens) on roof planes. It automatically calculates and positions standard, eave, hip, and ridge laths based on tile manufacturer data stored on the roof plane.

## Usage Environment
| Space | Supported | Notes |
|-------|-----------|-------|
| Model Space | Yes | This script operates in the 3D model to generate structural battens. |
| Paper Space | No | |
| Shop Drawing | No | |

## Prerequisites
- **Required Entities:** `ERoofPlane`.
- **Required Data:** The selected Roofplane must contain the `Hsb_TileExportData` and `Hsb_RoofEdgeTileData` submaps. These are typically generated by a Roof Tile configuration script.
- **Catalog:** Valid Extrusion Profiles must exist in the catalog.
- **Optional:** An `hsbTileHipRidge` instance attached to the roofplane is recommended to determine correct elevations for hip and ridge laths.

## Usage Steps

### Step 1: Launch Script
Command: `TSLINSERT` â†’ Select `hsbTileLath.mcr`
*(Alternatively, select the script from your hsbCAD Catalog).*

### Step 2: Configure Properties
```
Dialog: Properties Palette (OPM)
Action: Adjust the following parameters before selecting the roof:
- Material: Set the timber grade (e.g., C24).
- X-Offset: Set the verge offset (default 0).
- Extrusion Profile Override: Optionally select a specific profile for the eave lath.
```

### Step 3: Select Roofplane
```
Command Line: Select roofplane(s)
Action: Click on the Roofplane entity(s) in the model where you want to generate laths.
```
*The script will then calculate the geometry, generate the laths, and automatically erase the script instance, leaving only the beams.*

## Properties Panel Parameters

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| Material | String | C24 | Defines the timber grade for the battens. |
| X-Offset | Number | 0 | Adjusts the horizontal start position of the lathing grid relative to the verge (gable end). Use this to control tile overhang or alignment. |
| Extrusion Profile Override | Dropdown | Derived | Selects a specific cross-sectional profile from the Extrusion catalog for the first (eave) row of laths. |

## Right-Click Menu Options

| Menu Item | Description |
|-----------|-------------|
| ERASELATH | Erases existing laths associated with the selected roofplanes. Prompts for specific laths or uses `<Enter>` to select all. |
| SPLITLATH | Splits existing laths at specific points. Prompts for laths and then points to split them. |
| Catalog Entries | Allows loading property presets from the catalog. |

## Settings Files
- **Configuration Source:** Roofplane Entity
- **Purpose:** This script does not use a separate settings file. It reads configuration directly from the selected Roofplane's submaps (`Hsb_TileExportData` and `Hsb_RoofEdgeTileData`). Ensure these are populated by your preliminary roof design tools.

## Tips
- **Avoiding Duplicates:** If you run the script multiple times on the same roof, it may create duplicate laths. Use the **ERASELATH** function or manually delete existing laths before re-running the generation script.
- **Shed Roofs:** The script automatically detects shed roofs and will not create ridge battens (as per version 1.6 logic).
- **Verge Alignment:** Use the **X-Offset** property to fine-tune the position of the first full batten rather than moving individual beams manually.
- **Hip Heights:** If your hip/ridge laths are at the wrong height, ensure an `hsbTileHipRidge` instance is attached to the roofplane to provide the correct elevation data.

## FAQ
- **Q: I get the error "hsbTileLath: invalid selection set." What is wrong?**
  A: The Roofplane you selected is missing the necessary data. Ensure the Roofplane has been processed by a tile configuration tool to generate the `Hsb_TileExportData`.

- **Q: The laths are not aligning with my tiles.**
  A: Check the **X-Offset** in the properties. Also, verify that the `VerticalDistribution` points in the roofplane data match your tile dimensions.

- **Q: Why is there no ridge batten on my roof?**
  A: The roof is likely identified as a "Shed Roof" (single slope). The script suppresses ridge battens for this roof type (RS-125).

- **Q: Can I change the profile of just the bottom row (eave)?**
  A: Yes. Use the **Extrusion Profile Override** property to select a specific profile (e.g., a ventilation batten) for the eave row. The rest will use the standard rectangular profile defined in the tile data.