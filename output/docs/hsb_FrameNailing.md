# hsb_FrameNailing.mcr

## Overview
This script automatically calculates and generates nailing details for timber frame walls and floors. It identifies structural components (studs, plates, headers, etc.) and places nail instances based on configurable spacing and profile positions.

## Usage Environment
| Space | Supported | Notes |
|-------|-----------|-------|
| Model Space | Yes | The script operates on 3D Elements and their geometry. |
| Paper Space | No | |
| Shop Drawing | No | This is a detailing/modeling script, not a 2D drawing generator. |

## Prerequisites
- **Required Entities**: At least one structural `Element` (Wall or Floor) must be present in the model.
- **Minimum Beam Count**: 0 (The script scans the entire element).
- **Required Settings Files**:
  - `hsb_FrameNail.mcr`: This referenced script is required to generate the individual nail objects.
  - Catalog entries for default material/nail properties (handled by the child script).

## Usage Steps

### Step 1: Launch Script
Command: `TSLINSERT` â†’ Browse and select `hsb_FrameNailing.mcr`

### Step 2: Select Elements
```
Command Line: Select one, or more elements
Action: Click on the wall or floor elements you wish to apply nailing to. Press Enter to confirm selection.
```

### Step 3: Adjust Properties (Optional)
After insertion, select the script instance (usually located near the element origin or selectable via Quick Select) to modify nailing parameters in the Properties Palette.

## Properties Panel Parameters

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| View Direction | Dropdown | Outside | Determines which side of the wall/floor to apply nails (Inside or Outside). |
| Index 1 Position | Number | 20 | Vertical position offset for the first nail row relative to the beam profile. |
| Index 2 Position | Number | 0 | Vertical position offset for the second nail row. |
| Index 3 Position | Number | 60 | Vertical position offset for the third nail row. |
| Index 4 Position | Number | 100 | Vertical position offset for the fourth nail row. |
| Header/Brace Nail Spacing | Number | 600 | The maximum spacing (in mm) between nails along headers and braces. |

## Right-Click Menu Options

| Menu Item | Description |
|-----------|-------------|
| Reapply Frame Nails | Deletes all existing nails generated by this instance and recalculates them based on the current geometry and property settings. |

## Settings Files
- **Filename**: `hsb_FrameNail.mcr`
- **Location**: TSL Search Path (Company or hsbCAD Install path)
- **Purpose**: This child script is spawned dynamically by the main script to create the actual nail geometry at the calculated coordinates.

## Tips
- **Updating Nails**: If you modify the wall geometry (e.g., move a window or add an opening), right-click the script instance and select **Reapply Frame Nails** to update the pattern.
- **Visualizing Nails**: Ensure your layer settings allow you to see the entities generated by the `hsb_FrameNail` script.
- **Floor Trimmers**: The script includes logic to handle floor trimmers and prevents double nailing on headers or braces when spacing aligns exactly.

## FAQ
- **Q: Why don't I see any nails after running the script?**
  - A: Ensure that `hsb_FrameNail.mcr` exists in your TSL search path. Also, check the **View Direction** property; you may be looking at the wrong side of the wall.
- **Q: How are the "Index" positions used?**
  - A: These values determine where the nails are placed vertically across the width of a stud or plate. They are checked against the beam's profile geometry to find valid nailing points.
- **Q: Does this work for both walls and floors?**
  - A: Yes, the script detects whether the selected element is a Wall or a Floor and applies the appropriate logic for beam categorization and nailing.