# HSB_E-Replicator.mcr

## Overview
This script allows you to create and manage multiple identical copies (replicas) of a master timber element. Any design changes made to the main element are automatically propagated to all linked replicas, ensuring consistency across the project.

## Usage Environment
| Space | Supported | Notes |
|-------|-----------|-------|
| Model Space | Yes | This script operates exclusively in the 3D model environment. |
| Paper Space | No | Not intended for layout or detailing views. |
| Shop Drawing | No | Does not generate 2D outputs directly. |

## Prerequisites
- **Required Entities:** One Main Element (master) to serve as the source for geometry.
- **Minimum Beam Count:** The Main Element must contain at least one beam or constructive tool.
- **Required Settings:** A TSL Catalog entry named `HSB_E-Replicator` must exist in your hsbCAD configuration.

## Usage Steps

### Step 1: Launch Script
**Command:** `TSLINSERT`
**Action:** Browse to and select `HSB_E-Replicator.mcr`.

### Step 2: Select Main Element
**Action:** Click on the timber element in the Model Space that you wish to use as the master (source).
*Note: If the element already has a Replicator assigned, the script will abort.*

### Step 3: Define Input Mode
```
Command Line: Specify the input mode. <Select elements>, Create elements
Action: Enter 1 to link existing elements, or Enter 2 to create new geometry.
```

### Step 4a: If you chose "Create elements" (Mode 2)
```
Command Line: Specify base point for replica:
Action: Click in the model to place the first replica.

Command Line: Specify second point (displacement):
Action: Click a second point to determine the direction/distance.

Command Line: Specify rotation angle <0>:
Action: Enter an angle or click to set the rotation of the replica.
```
*(Repeat for multiple replicas if requested)*

### Step 4b: If you chose "Select elements" (Mode 1)
```
Command Line: Select elements:
Action: Use a selection box to click existing elements in the model that you want to turn into replicas of the Main Element.
```

## Properties Panel Parameters

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| inputMode | Integer | 1 | Determines how replicas are defined: **1** = Select existing elements to link; **2** = Create new geometry interactively. |
| textHeight | Double | 100 mm | Controls the height of the on-screen text labels (e.g., quantity or mirror status) displayed in the model. |
| seperator | String | - | The character used between the Main Element number and the replica index (e.g., changing `-` to `_` results in `WALL_1` instead of `WALL-1`). |
| dimStyle | String | _DimStyles | Specifies the dimension style to be used for any on-screen annotations generated by the script. |

## Right-Click Menu Options
*(Available after selecting the element and running the script)*

| Menu Item | Description |
|-----------|-------------|
| Add Replica's | Prompts you to select or create additional elements and adds them to the list of managed replicas. |
| Mirror | Flips the geometry of the replica elements across their central axis and updates their status to "Mirrored". |
| Delete Construction | Removes all internal beams and machining from the replica elements, leaving them as empty shells. The Main Element remains untouched. |
| Recalculate All | Forces a complete overwrite of all replica geometries based on the current state of the Main Element. Useful if replicas become out of sync. |
| Lock/Unlock Amount | Toggles a lock state that prevents (or allows) changes to the number of replicas processed. |
| Select new main element | Allows you to re-assign a different element in the model to be the master source for the existing replicas. |

## Settings Files
- **Catalog Name**: `HSB_E-Replicator`
- **Location**: TSL Catalog (Company or hsbCAD Install path)
- **Purpose**: Stores the default property values (text height, separator, etc.) used when the script is first inserted.

## Tips
- **Avoid Duplication:** Do not insert the script on an element that already has a Replicator assigned. Instead, right-click the existing element and select "Add Replica's".
- **Renaming:** You can globally update the numbering of all replicas by simply changing the `seperator` property in the Properties Palette.
- **Troubleshooting:** If a replica does not update after you changed the Main Element, right-click the Main Element and select "Recalculate All".

## FAQ
- **Q: Can I use this to create mirrored roof cassettes?**
  A: Yes. After creating the replicas, use the "Mirror" option in the right-click context menu to flip specific copies as needed.
- **Q: What happens if I delete a beam from the Main Element?**
  A: The next time the script recalculates (or if you run "Recalculate All"), that beam will be automatically deleted from all replicas.
- **Q: The script gives an error about a "replicator tsl assigned". What do I do?**
  A: This means the element is already a master for another group. You must either delete that TSL instance first or use the "Add Replica's" command on the existing script instance.