{
  "filename": "HSB_G-DistributionPoint.mcr",
  "status": "completed",
  "total_tokens": 24384,
  "processing_time": 487.2272980213165,
  "passes": {
    "1": {
      "success": true,
      "data": {},
      "tokens_used": 5420,
      "error": null
    },
    "2": {
      "success": true,
      "data": {
        "usageEnvironment": {
          "primarySpace": "ModelSpace",
          "supportsPaperSpace": false,
          "isShopDrawingScript": false,
          "isMultipageScript": false,
          "detectionEvidence": "Script uses getPoint() for 3D placement and draws geometry (PLine, Display) using World coordinate system variables (_Pt0, _ZW, _XW, _YW). No usage of sd_* functions, _Viewport, or sheet generation logic."
        },
        "prerequisites": {
          "requiredEntities": [],
          "minimumBeams": 0,
          "requiredSpace": "Model Space (3D)",
          "requiredSettings": []
        }
      },
      "tokens_used": 3035,
      "error": null
    },
    "3": {
      "success": true,
      "data": {
        "commandLine": {
          "insertionFlow": [
            {
              "step": 1,
              "function": "getPoint",
              "promptOriginal": "Select position",
              "condition": "_bOnInsert",
              "required": true
            },
            {
              "step": 2,
              "function": "getString",
              "promptOriginal": "Specify distribution number <1>",
              "condition": "_bOnInsert",
              "required": true
            },
            {
              "step": 3,
              "function": "getString",
              "promptOriginal": "Specify height <0.0>",
              "condition": "_bOnInsert",
              "required": true
            }
          ],
          "keywordOptions": []
        },
        "dialogs": [],
        "opmProperties": [
          {
            "index": 0,
            "variable": "distributionNumber",
            "type": "PropInt",
            "displayName": "Distribution number",
            "defaultValue": 0,
            "inputType": "number",
            "options": [],
            "category": null,
            "description": null
          },
          {
            "index": 0,
            "variable": "symbolSize",
            "type": "PropDouble",
            "displayName": "Symbol size",
            "defaultValue": "U(100)",
            "inputType": "number",
            "options": [],
            "category": null,
            "description": null
          }
        ],
        "contextMenu": [],
        "settingsFiles": []
      },
      "tokens_used": 4405,
      "error": null
    },
    "4": {
      "success": true,
      "data": {
        "scriptPurpose": {
          "summary": "Inserts a graphical symbol in the model representing a specific point (distribution point) used for logistics or sheet distribution planning.",
          "category": "Logistics/Annotation",
          "typicalUseCase": "Used to mark locations on the construction site or in the model where material bundles or sheets will be distributed, associating a specific number and height with that location."
        },
        "parameters": [
          {
            "name": "distributionNumber",
            "technicalDefault": "0",
            "businessMeaning": "The unique identifier or label for this distribution point. It appears as text within the symbol.",
            "validRange": "1 to 9999",
            "unit": "count",
            "affectsOutput": "Updates the numeric text displayed at the center of the symbol and on the vertical elevation indicators."
          },
          {
            "name": "symbolSize",
            "technicalDefault": "U(100)",
            "businessMeaning": "The scale or physical diameter of the distribution marker symbol in the model.",
            "validRange": "50 to 500",
            "unit": "mm",
            "affectsOutput": "Scales the entire graphical representation (circle, arrows, and text height) of the distribution point."
          }
        ],
        "parameterDependencies": [],
        "outputEntities": [
          {
            "type": "Annotation/Geometry",
            "description": "A 3D graphical symbol consisting of a horizontal circle, a vertical axis arrow with arrowheads pointing up and down, and text labels (number) visible in plan and elevation.",
            "appliedTo": "Model Space (World Coordinates)"
          }
        ]
      },
      "tokens_used": 2614,
      "error": null
    },
    "5": {
      "success": true,
      "data": {
        "workflowDiagram": [
          "1. Script execution begins (Insert mode)",
          "2. Internal check: Is this the first insert cycle?",
          "3. Prompt user: Select position (3D point)",
          "4. Internal calculation: Project selected point Z-height to match current construction plane",
          "5. Prompt user: Specify distribution number",
          "6. Internal logic: Parse number string or use default (1)",
          "7. Prompt user: Specify height offset",
          "8. Internal logic: Parse height string or use default (0.0) and adjust insertion point",
          "9. Set instance properties (number, final point)",
          "10. Generate visualization (Text, Circle, Vertical Arrows)",
          "11. Script ends"
        ],
        "conditionalBranches": [
          {
            "condition": "Insert Cycle Count",
            "path1": {
              "name": "Subsequent Cycle",
              "steps": [
                "Erase current instance",
                "Return (stop script)"
              ]
            },
            "path2": {
              "name": "First Cycle",
              "steps": [
                "Proceed to user prompts"
              ]
            }
          },
          {
            "condition": "Distribution Number Input",
            "path1": {
              "name": "User enters text",
              "steps": [
                "Parse text to integer",
                "Update distributionNumber property"
              ]
            },
            "path2": {
              "name": "User presses Enter (empty)",
              "steps": [
                "Use default value (1)",
                "Update distributionNumber property"
              ]
            }
          },
          {
            "condition": "Height Input",
            "path1": {
              "name": "User enters text",
              "steps": [
                "Parse text to double",
                "Move insertion point by Z offset"
              ]
            },
            "path2": {
              "name": "User presses Enter (empty)",
              "steps": [
                "Use default value (0.0)",
                "Keep insertion point at selected height"
              ]
            }
          }
        ],
        "validationRules": [
          {
            "check": "Point Selection",
            "errorMessage": "None (Function blocks until point is picked)",
            "recovery": "User must click a valid point in the CAD model"
          },
          {
            "check": "Number Format",
            "errorMessage": "None",
            "recovery": "If input is non-numeric, script defaults to 0 internally (via atoi)"
          },
          {
            "check": "Height Format",
            "errorMessage": "None",
            "recovery": "If input is non-numeric, script defaults to 0.0 internally (via atof)"
          }
        ],
        "postInsertionActions": [
          {
            "action": "Modify Distribution Number",
            "how": "OPM (Properties Palette)",
            "effect": "Updates the numeric text displayed in the center of the symbol and on the vertical axis markers."
          },
          {
            "action": "Modify Symbol Size",
            "how": "OPM (Properties Palette)",
            "effect": "Rescales the circle diameter, arrow length, arrow head size, and text height proportionally."
          },
          {
            "action": "Move Position",
            "how": "Standard CAD Grips or Move command",
            "effect": "Relocates the entire symbol assembly to the new coordinates."
          }
        ]
      },
      "tokens_used": 4750,
      "error": null
    },
    "6": {
      "success": true,
      "data": {
        "markdown": "# HSB_G-DistributionPoint.mcr\n\n## Overview\nThis script inserts a 3D graphical symbol into the model to represent a specific distribution point for logistics or planning. It displays a unique ID number and vertical elevation markers, helping to organize material placement or sheet distribution locations on site.\n\n## Usage Environment\n| Space | Supported | Notes |\n|-------|-----------|-------|\n| Model Space | Yes | The symbol is placed in 3D world coordinates. |\n| Paper Space | No | Not intended for layout sheets. |\n| Shop Drawing | No | Not intended for manufacturing views. |\n\n## Prerequisites\n- **Required entities**: None\n- **Minimum beam count**: 0\n- **Required settings files**: None\n\n## Usage Steps\n\n### Step 1: Launch Script\nCommand: `TSLINSERT` â†’ Select `HSB_G-DistributionPoint.mcr`\n\n### Step 2: Select Position\n```\nCommand Line: Select position\nAction: Click in the drawing area to specify the location for the distribution point.\n```\n*Note: The script will project the point to the current construction plane height.*\n\n### Step 3: Specify Distribution Number\n```\nCommand Line: Specify distribution number <1>\nAction: Type a unique number for this point and press Enter. If you press Enter without typing, the script defaults to 1.\n```\n\n### Step 4: Specify Height\n```\nCommand Line: Specify height <0.0>\nAction: Type a vertical offset value and press Enter. If you press Enter without typing, the script defaults to 0.0.\n```\n*Note: This value shifts the symbol vertically from the location selected in Step 2.*\n\n## Properties Panel Parameters\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| Distribution number | Number | 0 | The unique identifier label displayed in the center of the symbol. |\n| Symbol size | Number | 100 | The physical size (diameter) of the distribution marker. Increasing this scales the circle, arrows, and text. |\n\n## Right-Click Menu Options\n\n| Menu Item | Description |\n|-----------|-------------|\n| (None) | No custom context menu options are available for this script. |\n\n## Settings Files\n- **Filename**: None\n- **Location**: N/A\n- **Purpose**: N/A\n\n## Tips\n- **Visual Scaling**: Use the **Symbol size** property to ensure the text and markers are legible depending on the scale of your model views.\n- **Planning**: Use these markers to indicate crane drop zones, material stacking areas, or specific sheet delivery locations on the construction site plan.\n- **3D Movement**: You can use standard AutoCAD grips to drag the symbol to a different elevation or plan location if the site plan changes.\n\n## FAQ\n- **Q: How do I change the number after I have already placed the symbol?**\n- **A**: Select the symbol in the model, open the Properties Palette (Ctrl+1), and change the value in the \"Distribution number\" field.\n- **Q: Can I change the height after insertion?**\n- **A**: Yes. You can select the symbol and use the standard Move command or drag the 3D grip to a new Z-height.\n- **Q: What happens if I enter text instead of a number for the ID?**\n- **A**: The script will default to 0 if it cannot parse the input as a number."
      },
      "tokens_used": 4160,
      "error": null
    }
  }
}