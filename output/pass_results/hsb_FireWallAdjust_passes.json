{
  "filename": "hsb_FireWallAdjust.mcr",
  "status": "completed",
  "total_tokens": 31882,
  "processing_time": 718.5727853775024,
  "passes": {
    "1": {
      "success": true,
      "data": {
        "header": {
          "type": null,
          "numBeamsReq": null,
          "keywords": [],
          "majorVersion": null,
          "minorVersion": null,
          "dxaOut": null,
          "implInsert": null
        },
        "description": "",
        "versionHistory": [
          {
            "version": "1.0",
            "date": "24.03.2009",
            "author": "Alberto Jena (aj@hsb-cad.com)",
            "changes": "Release Version"
          }
        ],
        "settingsFiles": [],
        "dependencies": [
          "hsb_MetalPlate"
        ]
      },
      "tokens_used": 6534,
      "error": null
    },
    "2": {
      "success": true,
      "data": {
        "usageEnvironment": {
          "primarySpace": "ModelSpace",
          "supportsPaperSpace": false,
          "isShopDrawingScript": false,
          "isMultipageScript": false,
          "detectionEvidence": "The script uses PrEntity to select Element objects and performs geometric operations (transforming beams, creating sheets) within the model. There is no interaction with viewports, paper space entities, or shop drawing annotations."
        },
        "prerequisites": {
          "requiredEntities": [
            "ElementWallSF"
          ],
          "minimumBeams": 1,
          "requiredSpace": "Model Space containing Wall Elements.",
          "requiredSettings": [
            "hsb_MetalPlate"
          ]
        }
      },
      "tokens_used": 4986,
      "error": null
    },
    "3": {
      "success": true,
      "data": {
        "commandLine": {
          "insertionFlow": [
            {
              "step": 1,
              "function": "PrEntity",
              "promptOriginal": "Select a set of elements",
              "condition": "_bOnInsert",
              "required": true
            }
          ],
          "keywordOptions": []
        },
        "dialogs": [
          {
            "type": "ShowDynamicDialog",
            "trigger": "On Insert if _kExecuteKey is empty (showDialogOnce)",
            "title": null,
            "dataSource": "Script Properties",
            "features": {
              "searchable": false,
              "multiSelect": false
            }
          }
        ],
        "opmProperties": [
          {
            "index": 1,
            "variable": "psExtType",
            "type": "PropString",
            "displayName": "Code FireWalla",
            "defaultValue": "AA;B;",
            "inputType": "text",
            "options": [],
            "category": null,
            "description": null
          },
          {
            "index": 1,
            "variable": "dOffsetBottom",
            "type": "PropDouble",
            "displayName": "Offset From Bottom",
            "defaultValue": "U(400)",
            "inputType": "number",
            "options": [],
            "category": null,
            "description": null
          },
          {
            "index": 2,
            "variable": "dOffsetCenters",
            "type": "PropDouble",
            "displayName": "Centers Spacing",
            "defaultValue": "U(500)",
            "inputType": "number",
            "options": [],
            "category": null,
            "description": null
          },
          {
            "index": 3,
            "variable": "dOSBTh",
            "type": "PropDouble",
            "displayName": "OSB Thickness",
            "defaultValue": "U(9)",
            "inputType": "number",
            "options": [],
            "category": null,
            "description": null
          }
        ],
        "contextMenu": [],
        "settingsFiles": []
      },
      "tokens_used": 8292,
      "error": null
    },
    "4": {
      "success": true,
      "data": {
        "scriptPurpose": {
          "summary": "Automates the detailing of fire-rated timber walls by inserting metal plates between wall layers and creating OSB fire-stops around openings and wall perimeters.",
          "category": "Framing / Fire Protection",
          "typicalUseCase": "When a designer needs to convert standard wall elements into fire-rated assemblies by adding cavity barriers and perimeter blocking, ensuring studs are offset to accommodate sheathing thickness."
        },
        "parameters": [
          {
            "name": "psExtType",
            "technicalDefault": "\"AA;B;\"",
            "businessMeaning": "A filter list of Element Codes (e.g., Wall Types) that identify which walls in the selection require fire rating adjustments. The script only processes walls whose codes match this list.",
            "validRange": "Any valid string codes found in the project's Element Catalog, separated by semicolons.",
            "unit": "String (List)",
            "affectsOutput": "Determines which elements are modified. Non-matching elements are ignored."
          },
          {
            "name": "dOffsetBottom",
            "technicalDefault": "U(400)",
            "businessMeaning": "The vertical distance from the bottom of the selected beams to the center of the first metal plate inserted in the wall cavity.",
            "validRange": "0mm to Wall Height (Typically 100mm - 600mm)",
            "unit": "mm",
            "affectsOutput": "Controls the vertical starting position of the metal plate array within the wall studs."
          },
          {
            "name": "dOffsetCenters",
            "technicalDefault": "U(500)",
            "businessMeaning": "The vertical spacing (center-to-center) between successive metal plates installed in the wall cavity.",
            "validRange": "300mm - 1200mm (Dependent on fire engineering requirements)",
            "unit": "mm",
            "affectsOutput": "Controls the density/frequency of metal plates along the height of the studs."
          },
          {
            "name": "dOSBTh",
            "technicalDefault": "U(9)",
            "businessMeaning": "The thickness of the OSB (Oriented Strand Board) sheets used to create the fire-stops around openings and the wall perimeter.",
            "validRange": "9mm - 22mm (Standard OSB/plywood thicknesses)",
            "unit": "mm",
            "affectsOutput": "Defines the physical thickness of the generated OSB sheets and simultaneously offsets the position of surrounding studs/jacks/transoms to create the necessary gap for this material."
          }
        ],
        "parameterDependencies": [
          {
            "trigger": "Changing dOSBTh",
            "effect": "Alters both the geometry of the OSB sheets (thickness) and the positions of the timber beams (gap width).",
            "cascade": [
              "Generated OSB Sheets",
              "Stud/Jack/Transom Positions"
            ]
          },
          {
            "trigger": "Changing dOffsetBottom or dOffsetCenters",
            "effect": "Recalculates the insertion points for the hsb_MetalPlate instances.",
            "cascade": [
              "Metal Plate Locations"
            ]
          }
        ],
        "outputEntities": [
          {
            "type": "Sheet (OSB)",
            "description": "Solid blocking sheets generated around window/door openings and the outer perimeter of the wall element to act as a fire barrier.",
            "appliedTo": "Wall Element Group (assigned with code 'Z')"
          },
          {
            "type": "TSL Instance (hsb_MetalPlate)",
            "description": "Metal plates inserted between the front and back layers of the wall frame (e.g., between double studs) to provide lateral stability or fire cavity barriers.",
            "appliedTo": "Paired Studs, King Studs, and Jack Studs."
          },
          {
            "type": "Beam Modification",
            "description": "Studs, Jacks, Transoms, and Sills are translated (moved) and stretched to create a precise gap equal to the OSB thickness.",
            "appliedTo": "Individual beams within the wall element."
          }
        ]
      },
      "tokens_used": 7936,
      "error": null
    },
    "5": {
      "success": false,
      "data": {},
      "tokens_used": 0,
      "error": "Request timeout after retries"
    },
    "6": {
      "success": true,
      "data": {
        "markdown": "# hsb_FireWallAdjust.mcr\n\n## Overview\nAutomates the detailing of fire-rated timber walls by inserting metal plates between wall layers and creating OSB fire-stops around openings and wall perimeters. It also adjusts stud and jack positions to accommodate the specified sheathing thickness.\n\n## Usage Environment\n| Space | Supported | Notes |\n|-------|-----------|-------|\n| Model Space | Yes | This script operates on 3D wall elements in the model. |\n| Paper Space | No | Not intended for layout or annotation in 2D drawings. |\n| Shop Drawing | No | Generates physical geometry, not drawing views. |\n\n## Prerequisites\n- **Required entities**: Wall Elements (`ElementWallSF`).\n- **Minimum beam count**: 1.\n- **Required settings**: The script `hsb_MetalPlate` must be present in your TSL search path.\n\n## Usage Steps\n\n### Step 1: Launch Script\nCommand: `TSLINSERT` â†’ Select `hsb_FireWallAdjust.mcr`\n\n### Step 2: Select Elements\n```\nCommand Line: Select a set of elements\nAction: Click on the wall elements you wish to detail and press Enter.\n```\n\n### Step 3: Configure Parameters (Optional)\nA dialog may appear upon first insertion. You can also adjust parameters later via the Properties Palette. Select the inserted script instance in the model to modify fire-stop thickness or plate spacing.\n\n## Properties Panel Parameters\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| Code FireWalla | Text | AA;B; | A list of Element Codes (separated by semicolons) that identify which walls to process. Only walls matching these codes will be modified. |\n| Offset From Bottom | Number | 400 mm | The vertical distance from the bottom of the wall to the center of the first metal plate. |\n| Centers Spacing | Number | 500 mm | The vertical spacing (center-to-center) between metal plates along the height of the wall. |\n| OSB Thickness | Number | 9 mm | The thickness of the OSB fire-stop sheets. This also controls the gap size created between studs/jacks to fit the OSB. |\n\n## Right-Click Menu Options\n\n| Menu Item | Description |\n|-----------|-------------|\n| *None* | No specific context menu items are added by this script. |\n\n## Settings Files\n- **Dependency**: `hsb_MetalPlate.mcr`\n  - **Location**: TSL Script Folder\n  - **Purpose**: This script is called by `hsb_FireWallAdjust` to generate the metal plate geometry within the wall cavity.\n\n## Tips\n- **Filtering Walls**: If the script seems to do nothing after insertion, check the **Code FireWalla** property. Ensure the Element Codes assigned to your walls (in the Element Catalog) are listed in this string (e.g., \"FW1;FW2;\").\n- **Geometry Shift**: Changing the **OSB Thickness** will physically move the studs, jacks, and transoms to create a gap. Ensure this does not cause clashes with other structural elements.\n- **Fire Regulations**: Verify that the **Offset From Bottom** and **Centers Spacing** values comply with your local fire engineering requirements for cavity barriers.\n\n## FAQ\n- **Q: Why did the script only modify some of the walls I selected?**\n  A: Check the **Code FireWalla** property. The script filters the selection based on this list. You must add the specific Element Code of the ignored walls to the list.\n- **Q: My studs have moved after running the script. Is this normal?**\n  A: Yes. The script automatically offsets the wall studs to create a cavity for the OSB fire-stops based on the **OSB Thickness** parameter.\n- **Q: Where do the metal plates appear?**\n  A: The script inserts `hsb_MetalPlate` instances between the front and back layers of the wall (e.g., between double studs) at the vertical intervals defined by the offset and spacing settings."
      },
      "tokens_used": 4134,
      "error": null
    }
  }
}