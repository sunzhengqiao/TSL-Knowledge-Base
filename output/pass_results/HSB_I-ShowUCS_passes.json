{
  "filename": "HSB_I-ShowUCS.mcr",
  "status": "completed",
  "total_tokens": 17992,
  "processing_time": 221.98077630996704,
  "passes": {
    "1": {
      "success": true,
      "data": {
        "header": {
          "type": null,
          "numBeamsReq": null,
          "keywords": [],
          "majorVersion": 1,
          "minorVersion": 0,
          "dxaOut": null,
          "implInsert": null
        },
        "description": "",
        "versionHistory": [
          {
            "version": "1.00",
            "date": "21.10.2013",
            "author": "AS",
            "changes": "First revision"
          }
        ],
        "settingsFiles": [],
        "dependencies": []
      },
      "tokens_used": 4632,
      "error": null
    },
    "2": {
      "success": true,
      "data": {
        "usageEnvironment": {
          "primarySpace": "ModelSpace",
          "supportsPaperSpace": false,
          "isShopDrawingScript": false,
          "isMultipageScript": false,
          "detectionEvidence": "Script uses generic PrEntity for selection and iterates through _Entity array to visualize entity coordinate systems. No _Viewport logic, #Type declarations, or ShopDrawing (SD) specific prefixes detected."
        },
        "prerequisites": {
          "requiredEntities": [
            "Entity"
          ],
          "minimumBeams": 1,
          "requiredSpace": "Model Space",
          "requiredSettings": []
        }
      },
      "tokens_used": 2317,
      "error": null
    },
    "3": {
      "success": true,
      "data": {
        "commandLine": {
          "insertionFlow": [
            {
              "step": 1,
              "function": "PrEntity",
              "promptOriginal": "|Select a set of entities|",
              "condition": "_bOnInsert",
              "required": true
            }
          ],
          "keywordOptions": []
        },
        "dialogs": [],
        "opmProperties": [],
        "contextMenu": [],
        "settingsFiles": []
      },
      "tokens_used": 2535,
      "error": null
    },
    "4": {
      "success": true,
      "data": {
        "scriptPurpose": {
          "summary": "Visualizes the local coordinate system (UCS) orientation of selected entities to verify their alignment and rotation in 3D space.",
          "category": "Visualization/Debugging",
          "typicalUseCase": "Used when a user needs to check if specific beams or construction elements are rotated correctly (e.g., checking the 'top' or 'side' orientation) before executing further machining or assembly scripts."
        },
        "parameters": [
          {
            "name": "dSize",
            "technicalDefault": "U(250)",
            "businessMeaning": "The visual length of the axis lines drawn to indicate direction. This controls how large or small the UCS gizmo appears in the drawing.",
            "validRange": "100 - 2000",
            "unit": "mm",
            "affectsOutput": "Scales the length of the X, Y, and Z axis lines, the size of the endpoint circles, and the offset of the text labels relative to the entity origin."
          }
        ],
        "parameterDependencies": [],
        "outputEntities": [
          {
            "type": "Visual Geometry (Lines, Polylines, Text)",
            "description": "Generates a triad of axis lines (Red for X, Green for Y, Blue for Z) originating from the entity's coordinate origin, including circular end markers and axis labels.",
            "appliedTo": "Any selected Entity (Beams, Walls, etc.)"
          }
        ]
      },
      "tokens_used": 1938,
      "error": null
    },
    "5": {
      "success": true,
      "data": {
        "workflowDiagram": [
          "Script launched (Insert Command)",
          "Check if script is in insertion state (_bOnInsert)",
          "Check if insertCycleCount > 1",
          "Prompt user to select a set of entities (PrEntity)",
          "Store selected entities in the _Entity array",
          "Terminate script execution (return)",
          "Script re-enters for calculation/drawing",
          "Initialize Display object and visual properties (Size, Colors, Labels)",
          "Loop through each entity in the _Entity array",
          "Extract the local coordinate system (CoordSys) of the entity",
          "Loop through each axis (X, Y, Z)",
          "Draw axis line (Red=X, Green=Y, Blue=Z) from origin",
          "Draw circular marker at 85% of axis length",
          "Draw text label at axis end",
          "Repeat for next axis/entity until complete"
        ],
        "conditionalBranches": [
          {
            "condition": "Script execution state (Is _bOnInsert true?)",
            "path1": {
              "name": "Insertion Phase",
              "steps": [
                "Evaluate insertCycleCount",
                "If > 1, erase instance and exit",
                "If == 1, prompt for entity selection",
                "Save entities to _Entity array",
                "Exit script immediately"
              ]
            },
            "path2": {
              "name": "Calculation/Drawing Phase",
              "steps": [
                "Skip selection prompts",
                "Iterate through existing _Entity array",
                "Generate visual geometry for UCS"
              ]
            }
          },
          {
            "condition": "Duplicate Insertion Check (insertCycleCount > 1)",
            "path1": {
              "name": "Duplicate Detected",
              "steps": [
                "Execute eraseInstance()",
                "Stop script execution"
              ]
            },
            "path2": {
              "name": "New Instance",
              "steps": [
                "Continue to PrEntity prompt"
              ]
            }
          }
        ],
        "validationRules": [
          {
            "check": "Entity Selection",
            "errorMessage": "None explicit (Relies on standard PrEntity behavior)",
            "recovery": "User must select at least one entity to visualize, or cancel to exit."
          }
        ],
        "postInsertionActions": []
      },
      "tokens_used": 2585,
      "error": null
    },
    "6": {
      "success": true,
      "data": {
        "markdown": "# HSB_I-ShowUCS.mcr\n\n## Overview\nThis script visualizes the local User Coordinate System (UCS) of selected entities to help verify their alignment and rotation in 3D space. It draws colored axis lines (X, Y, Z) originating from the entity's insertion point.\n\n## Usage Environment\n| Space | Supported | Notes |\n|-------|-----------|-------|\n| Model Space | Yes | Required for visualizing 3D entity orientation. |\n| Paper Space | No | Not supported. |\n| Shop Drawing | No | Not supported. |\n\n## Prerequisites\n- **Required entities**: At least one Entity (Beam, Wall, etc.).\n- **Minimum beam count**: 1\n- **Required settings files**: None\n\n## Usage Steps\n\n### Step 1: Launch Script\nCommand: `TSLINSERT` â†’ Select `HSB_I-ShowUCS.mcr` from the list.\n\n### Step 2: Select Entities\n```\nCommand Line: Select a set of entities\nAction: Click on the beams or elements you wish to inspect. Press Enter to confirm selection.\n```\n*Note: After confirming, the script will briefly close and automatically recalculate to generate the visualization.*\n\n### Step 3: View Results\nThe script will generate a triad of axis lines for each selected entity:\n- **Red Line**: X-Axis\n- **Green Line**: Y-Axis\n- **Blue Line**: Z-Axis\nCircular markers and text labels are placed at the end of each axis to indicate direction clearly.\n\n## Properties Panel Parameters\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| N/A | N/A | N/A | There are no user-editable properties in the AutoCAD Properties Palette for this script. The visualization size is determined by internal script settings. |\n\n## Right-Click Menu Options\n| Menu Item | Description |\n|-----------|-------------|\n| N/A | No custom context menu options are provided. |\n\n## Settings Files\n- **Filename**: None\n- **Location**: N/A\n- **Purpose**: N/A\n\n## Tips\n- **Color Coding**: Remember the standard color coding: Red is X, Green is Y, and Blue is Z.\n- **Checking Orientation**: This tool is particularly useful for checking if a wall is rotated correctly (e.g., ensuring the \"top\" of the wall points in the correct Z direction) before executing manufacturing or machining scripts.\n- **Visibility**: If the generated lines are hard to see against your background color, temporarily change your visual style or background to ensure high contrast.\n\n## FAQ\n- **Q: Why does the script seem to disappear after I select entities?**\n  - **A:** This is normal behavior. The script operates in two phases: first, it collects your selection, then it restarts in the background to draw the geometry based on that selection.\n- **Q: Can I change the length of the axis lines?**\n  - **A:** The length is currently hardcoded to a default size (approx. 250mm) within the script. You would need to contact your script administrator to modify the source code if a different size is required.\n- **Q: Does this permanently change my drawing?**\n  - **A:** The visualization is generated by the script. If you delete the script instance or erase the specific geometry generated by it, the original beams remain unchanged."
      },
      "tokens_used": 3985,
      "error": null
    }
  }
}