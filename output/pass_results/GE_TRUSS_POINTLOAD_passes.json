{
  "filename": "GE_TRUSS_POINTLOAD.mcr",
  "status": "completed",
  "total_tokens": 46856,
  "processing_time": 745.2043762207031,
  "passes": {
    "1": {
      "success": true,
      "data": {},
      "tokens_used": 9232,
      "error": null
    },
    "2": {
      "success": true,
      "data": {
        "usageEnvironment": {
          "primarySpace": "ModelSpace",
          "supportsPaperSpace": false,
          "isShopDrawingScript": false,
          "isMultipageScript": false,
          "detectionEvidence": "The script prompts for an Element ('getElement()') and creates physical Beams ('Beam().make()') within it. It explicitly uses 'collectEntities(..., _kModelSpace)' and manages a Model Space Display ('Display dpMS (-1)'). There is no usage of '_Viewport', 'sd_' prefixes, or drawing generation logic."
        },
        "prerequisites": {
          "requiredEntities": [
            "Element",
            "GenBeam"
          ],
          "minimumBeams": 0,
          "requiredSpace": "Must be inserted into an existing hsbCAD Element (typically a Wall or Floor) in the Model to generate framing reinforcement.",
          "requiredSettings": [
            "hsbFramingDefaults.Inventory.dll"
          ]
        }
      },
      "tokens_used": 7400,
      "error": null
    },
    "3": {
      "success": true,
      "data": {
        "commandLine": {
          "insertionFlow": [
            {
              "step": 1,
              "function": "getElement",
              "promptOriginal": "Select element",
              "condition": "_bOnInsert",
              "required": true
            }
          ],
          "keywordOptions": []
        },
        "dialogs": [],
        "opmProperties": [
          {
            "index": 0,
            "variable": "bExecute",
            "type": "PropInt",
            "displayName": "Execute",
            "defaultValue": 0,
            "inputType": "number",
            "options": [],
            "category": null,
            "description": null
          },
          {
            "index": 1,
            "variable": "sLumberItem",
            "type": "PropString",
            "displayName": "Lumber Item",
            "defaultValue": "",
            "inputType": "dropdown",
            "options": [],
            "category": null,
            "description": null
          },
          {
            "index": 2,
            "variable": "nStudsNum",
            "type": "PropInt",
            "displayName": "Studs Num",
            "defaultValue": 2,
            "inputType": "number",
            "options": [],
            "category": null,
            "description": null
          },
          {
            "index": 3,
            "variable": "nGirderPlies",
            "type": "PropInt",
            "displayName": "Girder Plies",
            "defaultValue": 1,
            "inputType": "number",
            "options": [],
            "category": null,
            "description": null
          },
          {
            "index": 4,
            "variable": "bUseStudsBetweenFloors",
            "type": "PropInt",
            "displayName": "Use Studs Between Floors",
            "defaultValue": 1,
            "inputType": "number",
            "options": [],
            "category": null,
            "description": null
          },
          {
            "index": 5,
            "variable": "sPostAssemblyName",
            "type": "PropString",
            "displayName": "Post Assembly Name",
            "defaultValue": "PointLoad",
            "inputType": "text",
            "options": [],
            "category": null,
            "description": null
          },
          {
            "index": 6,
            "variable": "sColorName",
            "type": "PropString",
            "displayName": "Color Name",
            "defaultValue": "MAGENTA",
            "inputType": "dropdown",
            "options": [],
            "category": null,
            "description": null
          }
        ],
        "contextMenu": [],
        "settingsFiles": [
          {
            "filename": "hsbFramingDefaults.Inventory.dll",
            "searchPaths": [
              "_kPathHsbInstall\\Utilities\\hsbFramingDefaultsEditor"
            ],
            "purpose": "Retrieves lumber inventory items (Species, Grade, Treatment, Dimensions) to populate the Lumber Item property dropdown.",
            "required": true
          }
        ]
      },
      "tokens_used": 7269,
      "error": null
    },
    "4": {
      "success": true,
      "data": {
        "scriptPurpose": {
          "summary": "Generates a reinforced built-up post/girder assembly within a wall to support point loads (such as truss bearings) and manages blocking integration.",
          "category": "Framing",
          "typicalUseCase": "Used when a heavy load transfers from a roof truss or floor girder down to a wall below, requiring multiple studs packed together to distribute the load, rather than standard single studs."
        },
        "parameters": [
          {
            "name": "bExecute",
            "technicalDefault": 0,
            "businessMeaning": "Master switch to enable or disable the script execution. When set to 1, the script runs the logic to generate or update the point load reinforcement.",
            "validRange": "0 (Off) or 1 (On)",
            "unit": "Boolean",
            "affectsOutput": "If 0, no beams are created or modified. If 1, existing reinforcement is deleted and regenerated based on current parameters."
          },
          {
            "name": "sLumberItem",
            "technicalDefault": "",
            "businessMeaning": "Specifies the material grade, size (thickness), and treatment for the reinforcement studs. Populated from the project's lumber inventory defaults.",
            "validRange": "Valid entries from hsbFramingDefaults Inventory (e.g., '2x4 SPF No.2')",
            "unit": "String",
            "affectsOutput": "Determines the cross-section dimensions (width/height) and material properties of the created beams. Influences the spatial fit within the wall cavity."
          },
          {
            "name": "nStudsNum",
            "technicalDefault": 2,
            "businessMeaning": "The number of studs placed side-by-side along the wall length to create the width of the load-bearing post.",
            "validRange": "1 to 10",
            "unit": "Count",
            "affectsOutput": "Controls the width of the reinforcement assembly. More studs increase the load-bearing capacity and the space occupied along the wall plate."
          },
          {
            "name": "nGirderPlies",
            "technicalDefault": 1,
            "businessMeaning": "The number of layers (plies) of studs stacked perpendicular to the wall plane (depth). This creates a thicker column to resist larger loads.",
            "validRange": "1 or more",
            "unit": "Count",
            "affectsOutput": "Controls the depth of the reinforcement assembly. Multiple plies may require the wall to be wider or may involve offsetting layers if space is tight."
          },
          {
            "name": "bUseStudsBetweenFloors",
            "technicalDefault": 1,
            "businessMeaning": "Determines if the reinforcement studs continue through floor levels (multi-story continuity) or are cut off at the top plate of the current single floor.",
            "validRange": "0 (Single Floor) or 1 (Continuous)",
            "unit": "Boolean",
            "affectsOutput": "If 1, studs run past top plates/bottom plates to connect with the floor above. If 0, studs are sized to fit only within the current wall height."
          },
          {
            "name": "sPostAssemblyName",
            "technicalDefault": "PointLoad",
            "businessMeaning": "The identifier (name) assigned to the created beams for reporting, labeling, and material listing (CAM/BIM).",
            "validRange": "Any string",
            "unit": "Text",
            "affectsOutput": "Sets the 'Assembly' or 'Group' property of the new beams, allowing them to be filtered or scheduled separately from standard wall studs."
          },
          {
            "name": "sColorName",
            "technicalDefault": "MAGENTA",
            "businessMeaning": "The visual display color used in the CAD model to distinguish the point load reinforcement from standard framing.",
            "validRange": "Standard CAD color names (e.g., Red, Green, Magenta, ByLayer)",
            "unit": "Text",
            "affectsOutput": "Changes the on-screen color of the generated beams in Model Space for visual verification."
          }
        ],
        "parameterDependencies": [
          {
            "trigger": "Changing sLumberItem",
            "effect": "Updates the available thickness and material properties.",
            "cascade": [
              "nStudsNum",
              "nGirderPlies"
            ]
          },
          {
            "trigger": "Increasing nStudsNum or nGirderPlies",
            "effect": "May exceed wall cavity width, potentially causing geometric overlap warnings or requiring wall width adjustments.",
            "cascade": [
              "sLumberItem"
            ]
          }
        ],
        "outputEntities": [
          {
            "type": "Beam (Wood Stud)",
            "description": "Vertical framing members forming the built-up post under the point load.",
            "appliedTo": "Inside the selected Wall Element at the calculated load bearing point."
          },
          {
            "type": "Blocking",
            "description": "Short filler pieces added between studs or around the new post to maintain spacing and stiffness.",
            "appliedTo": "Adjacent to the newly created studs within the wall."
          }
        ]
      },
      "tokens_used": 8923,
      "error": null
    },
    "5": {
      "success": true,
      "data": {},
      "tokens_used": 8309,
      "error": null
    },
    "6": {
      "success": true,
      "data": {
        "markdown": "# GE_TRUSS_POINTLOAD.mcr\n\n## Overview\nThis script generates a reinforced built-up post assembly within a wall to support heavy point loads, such as roof truss bearings or floor girders. It manages the creation of multiple studs packed together and handles blocking integration to distribute the load effectively.\n\n## Usage Environment\n| Space | Supported | Notes |\n|-------|-----------|-------|\n| Model Space | Yes | This script must be used in the Model Space to generate physical framing within an Element. |\n| Paper Space | No | Not applicable for layout views. |\n| Shop Drawing | No | Does not generate 2D drawings or annotations. |\n\n## Prerequisites\n- **Required Entities**: An existing hsbCAD Element (typically a Wall or Floor).\n- **Minimum Beam Count**: 0 (The script creates its own beams).\n- **Required Settings Files**:\n  - `hsbFramingDefaults.Inventory.dll` (Must be present to access lumber grades and sizes).\n\n## Usage Steps\n\n### Step 1: Launch Script\nCommand: `TSLINSERT` â†’ Select `GE_TRUSS_POINTLOAD.mcr`\n\n### Step 2: Select Element\n```\nCommand Line: Select element\nAction: Click on the Wall or Floor Element in the model where the point load reinforcement needs to be generated.\n```\n\n### Step 3: Configure Properties\nAfter selecting the element, the script inserts into the model. Open the **Properties Palette** (Ctrl+1) to adjust the settings.\n1. Set **Execute** to `1`.\n2. Select the desired **Lumber Item**.\n3. Adjust **Studs Num** and **Girder Plies** as required for the load.\n\n## Properties Panel Parameters\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| Execute | number | 0 | Master switch to generate the reinforcement. Set to `1` to create or update the beams. Set to `0` to disable regeneration. |\n| Lumber Item | dropdown | | Select the material grade and size (e.g., \"2x4 SPF No.2\") from your project inventory. This determines the stud dimensions. |\n| Studs Num | number | 2 | The number of studs placed side-by-side along the wall length. Increasing this creates a wider post. |\n| Girder Plies | number | 1 | The number of layers stacked perpendicular to the wall plane. Increasing this creates a deeper/thicker column. |\n| Use Studs Between Floors | number | 1 | Determines if studs run continuously through floor levels (`1`) or are cut off at the current floor's top plate (`0`). |\n| Post Assembly Name | text | PointLoad | The name assigned to the generated beams for grouping, reporting, and material lists. |\n| Color Name | dropdown | MAGENTA | The display color of the generated beams in Model Space for visual identification. |\n\n## Right-Click Menu Options\nThis script does not add specific custom options to the right-click context menu. Use the Properties Palette to modify parameters.\n\n## Settings Files\n- **Filename**: `hsbFramingDefaults.Inventory.dll`\n- **Location**: `_kPathHsbInstall\\Utilities\\hsbFramingDefaultsEditor`\n- **Purpose**: This file provides the list of available lumber materials (Species, Grade, Size) that populate the \"Lumber Item\" dropdown.\n\n## Tips\n- **Visual Verification**: The default color (Magenta) is chosen to stand out from standard framing. Check visually to ensure the new studs do not conflict with windows, doors, or other wall components.\n- **Load Calculations**: Consult your structural engineer to determine the required \"Studs Num\" (width) and \"Girder Plies\" (depth) for the specific point load.\n- **Updating**: After changing parameters in the Properties Palette, ensure **Execute** is set to `1`. The script will delete the old reinforcement and regenerate it based on the new settings.\n\n## FAQ\n- **Q: I changed the properties, but the model didn't update.**\n  - A: Make sure the **Execute** property is set to `1`. If it is already `1`, toggle it to `0` and back to `1` to force a refresh.\n- **Q: Can I use this for floor trusses?**\n  - A: Yes, this script is designed for any point load transfer, including roof trusses, floor girders, or heavy structural loads.\n- **Q: Why are my studs longer than the wall?**\n  - A: Check the **Use Studs Between Floors** setting. If set to `1`, the studs may extend beyond the current top plate to connect to the structure above."
      },
      "tokens_used": 5723,
      "error": null
    }
  }
}