{
  "filename": "Alpine-ReactionDisplayProperties.mcr",
  "status": "completed",
  "total_tokens": 21536,
  "processing_time": 248.43725204467773,
  "passes": {
    "1": {
      "success": true,
      "data": {
        "header": {
          "type": null,
          "numBeamsReq": null,
          "keywords": [],
          "majorVersion": null,
          "minorVersion": null,
          "dxaOut": null,
          "implInsert": null
        },
        "description": "",
        "versionHistory": [
          {
            "version": "v1.3",
            "date": "29.ago.2013",
            "author": "David Rueda (dr@hsb-cad.com)",
            "changes": "Strings added to translation"
          },
          {
            "version": "v1.2",
            "date": "17.ago.2012",
            "author": "David Rueda (dr@hsb-cad.com)",
            "changes": "Description added\nCopyright added\nThumbnail added"
          },
          {
            "version": "v1.0 && v1.1",
            "date": "",
            "author": "No author",
            "changes": ""
          }
        ],
        "settingsFiles": [],
        "dependencies": []
      },
      "tokens_used": 4541,
      "error": null
    },
    "2": {
      "success": true,
      "data": {
        "usageEnvironment": {
          "primarySpace": "ModelSpace",
          "supportsPaperSpace": false,
          "isShopDrawingScript": false,
          "isMultipageScript": false,
          "detectionEvidence": "The script uses Group().collectEntities( TRUE, TslInst(), _kModelSpace) to explicitly scan Model Space for TslInst entities. It lacks sd_ prefixes, Viewport handling, or #Type E entries required for Paper/ShopDrawing scripts."
        },
        "prerequisites": {
          "requiredEntities": [
            "TslInst"
          ],
          "minimumBeams": 0,
          "requiredSpace": "ModelSpace containing instances of the 'Alpine-BearingReaction' script",
          "requiredSettings": []
        }
      },
      "tokens_used": 1504,
      "error": null
    },
    "3": {
      "success": true,
      "data": {
        "commandLine": {
          "insertionFlow": [],
          "keywordOptions": []
        },
        "dialogs": [],
        "opmProperties": [
          {
            "index": 0,
            "variable": "prMinReaction",
            "type": "PropDouble",
            "displayName": "|Display Reactions above... (kN)|",
            "defaultValue": "0.0",
            "inputType": "number",
            "options": null,
            "category": null,
            "description": null
          },
          {
            "index": 0,
            "variable": "strShowInfill",
            "type": "PropString",
            "displayName": "|Reaction for Infill|",
            "defaultValue": "No",
            "inputType": "dropdown",
            "options": [
              "No",
              "Yes"
            ],
            "category": null,
            "description": null
          }
        ],
        "contextMenu": [],
        "settingsFiles": []
      },
      "tokens_used": 3595,
      "error": null
    },
    "4": {
      "success": true,
      "data": {
        "scriptPurpose": {
          "summary": "Batch updates display settings for structural reaction labels generated by the 'Alpine-BearingReaction' script across the entire model.",
          "category": "Annotation/Management",
          "typicalUseCase": "Used to clean up drawings by hiding reaction labels below a specific load threshold (e.g., < 1 kN) or toggling labels on infill elements without editing each instance individually."
        },
        "parameters": [
          {
            "name": "prMinReaction",
            "technicalDefault": "0.0",
            "businessMeaning": "The minimum load threshold in kiloNewtons (kN). Any calculated reaction force below this value will be hidden from the display.",
            "validRange": "0.0 - 50.0 kN",
            "unit": "kN",
            "affectsOutput": "Suppresses the visibility of text labels in the target script when the reaction magnitude is lower than the set value."
          },
          {
            "name": "strShowInfill",
            "technicalDefault": "No",
            "businessMeaning": "Determines whether structural reaction labels should be generated and displayed for elements classified as 'Infill'.",
            "validRange": "Yes, No",
            "unit": "Boolean",
            "affectsOutput": "Toggles the visibility of reaction labels specifically on infill walls/elements managed by the target script."
          }
        ],
        "parameterDependencies": [],
        "outputEntities": [
          {
            "type": "TslInst (Update)",
            "description": "Updates the internal property map (MinReactionForDisplay, ReactionsOnInfill) of all 'Alpine-BearingReaction' instances found in the Model Space.",
            "appliedTo": "All existing TslInst entities named 'ALPINE-BEARINGREACTION' in Model Space."
          }
        ]
      },
      "tokens_used": 4362,
      "error": null
    },
    "5": {
      "success": true,
      "data": {
        "workflowDiagram": [
          "Script inserted into Model Space",
          "Properties 'prMinReaction' and 'strShowInfill' are initialized (default 0.0, 'No')",
          "Static display text 'Reaction Text Display' is drawn",
          "Script executes Group().collectEntities to scan Model Space for all TslInst entities",
          "Iterate through each found entity",
          "Extract script name of current entity and convert to uppercase",
          "Conditional Check: Does script name equal 'ALPINE-BEARINGREACTION'?",
          "[Yes] Retrieve internal Map of the entity",
          "[Yes] Update Map: Set 'MinReactionForDisplay ' value from 'prMinReaction'",
          "[Yes] Update Map: Set 'ReactionsOnInfill ' based on 'strShowInfill' selection",
          "[Yes] Apply updated Map back to the entity",
          "[No] Skip to next entity",
          "Loop ends after processing all entities",
          "Script terminates"
        ],
        "conditionalBranches": [
          {
            "condition": "Entity Script Name Comparison",
            "path1": {
              "name": "Match Found (ALPINE-BEARINGREACTION)",
              "steps": [
                "Get entity Map",
                "Set Map Double 'MinReactionForDisplay '",
                "Set Map Int 'ReactionsOnInfill ' (1 for Yes, 0 for No)",
                "Set entity Map"
              ]
            },
            "path2": {
              "name": "No Match",
              "steps": [
                "Ignore entity and continue loop"
              ]
            }
          },
          {
            "condition": "strShowInfill Property Value",
            "path1": {
              "name": "Value is Yes",
              "steps": [
                "Set Map Int 'ReactionsOnInfill ' to 1"
              ]
            },
            "path2": {
              "name": "Value is No",
              "steps": [
                "Set Map Int 'ReactionsOnInfill ' to 0"
              ]
            }
          }
        ],
        "validationRules": [],
        "postInsertionActions": [
          {
            "action": "Update Reaction Settings",
            "how": "Select the script instance and modify 'prMinReaction' or 'strShowInfill' via the AutoCAD Properties Palette (OPM)",
            "effect": "Updates the local property values. To propagate changes to existing 'Alpine-BearingReaction' instances, the script must be recalculated (moved/grip edited) or re-inserted."
          },
          {
            "action": "View Script Identity",
            "how": "Observe the static text display in the model",
            "effect": "Visual confirmation that the script instance exists and represents the display configuration tool."
          }
        ]
      },
      "tokens_used": 3166,
      "error": null
    },
    "6": {
      "success": true,
      "data": {
        "markdown": "# Alpine-ReactionDisplayProperties.mcr\n\n## Overview\nThis script acts as a global controller for structural reaction annotations. It scans the entire model to update the display settings of all \"Alpine-BearingReaction\" instances, allowing you to hide minor loads and toggle infill labels simultaneously.\n\n## Usage Environment\n\n| Space | Supported | Notes |\n|-------|-----------|-------|\n| Model Space | Yes | This script must be placed in the Model Space to function correctly. |\n| Paper Space | No | Not supported for layout views. |\n| Shop Drawing | No | Not intended for manufacturing drawings. |\n\n## Prerequisites\n- **Required Entities**: The model must contain instances of the `Alpine-BearingReaction` script.\n- **Minimum Beam Count**: None required.\n- **Required Settings Files**: None.\n\n## Usage Steps\n\n### Step 1: Launch Script\n1.  Type `TSLINSERT` in the command line.\n2.  Navigate to the script library and select `Alpine-ReactionDisplayProperties.mcr`.\n3.  Click a location in the Model Space to insert the script instance.\n    *   *Note: Upon insertion, the script will immediately scan the model and apply default settings to all compatible reaction instances.*\n\n### Step 2: Configure Display Settings\n1.  Select the script instance you just inserted.\n2.  Open the **Properties Palette** (press `Ctrl + 1`).\n3.  Locate the **Script Instance** section (usually near the bottom or top depending on your CAD version).\n4.  Modify the parameters as needed (see *Properties Panel Parameters* below).\n5.  **Trigger Update**: To apply the new settings to existing reaction labels in the model, click a grip point of the script instance, move it slightly, and click again to force a recalculation.\n\n## Properties Panel Parameters\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| Display Reactions above... (kN) | Number | 0.0 | Sets the visibility threshold. Any reaction load lower than this value (in kN) will be hidden. Useful for cleaning up small loads. |\n| Reaction for Infill | Dropdown | No | Determines if reaction labels appear on elements classified as \"Infill\". Select \"Yes\" to show them or \"No\" to hide them. |\n\n## Right-Click Menu Options\nThis script does not add specific custom items to the right-click context menu. Standard AutoCAD/TSL options apply.\n\n## Settings Files\n-   None used.\n\n## Tips\n-   **Cleaning Up Drawings**: Set the \"Display Reactions above...\" value to `1.0` or `5.0` to automatically hide insignificant loads and reduce visual clutter in your structural plans.\n-   **Infill Walls**: If you do not need to see load calculations for non-structural infill walls, keep \"Reaction for Infill\" set to \"No\".\n-   **Placement**: You can place this script instance in an empty corner of the model or on a non-plotting layer. It serves as a settings controller rather than a physical building component.\n\n## FAQ\n\n**Q: I changed the properties in the palette, but the reaction labels in the model haven't updated.**\n**A:** The script needs to recalculate to push changes to the other instances. Select the `Alpine-ReactionDisplayProperties` instance, click a grip (blue square), move your mouse slightly, and click to place it again. This forces the script to run and update the model.\n\n**Q: Does this script delete reaction data?**\n**A:** No. It only changes the *display* settings (visibility). The calculation data remains intact in the original \"Alpine-BearingReaction\" instances.\n\n**Q: Can I have multiple instances of this script with different settings?**\n**A:** While you can insert multiple instances, they will all scan the same model entities. The last instance to be recalculated will dictate the display settings for the entire model. It is recommended to keep only one instance."
      },
      "tokens_used": 4368,
      "error": null
    }
  }
}