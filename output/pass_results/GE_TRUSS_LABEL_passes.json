{
  "filename": "GE_TRUSS_LABEL.mcr",
  "status": "completed",
  "total_tokens": 55763,
  "processing_time": 528.2712934017181,
  "passes": {
    "1": {
      "success": true,
      "data": {},
      "tokens_used": 8600,
      "error": null
    },
    "2": {
      "success": true,
      "data": {
        "usageEnvironment": {
          "primarySpace": "ModelSpace",
          "supportsPaperSpace": false,
          "isShopDrawingScript": false,
          "isMultipageScript": false,
          "detectionEvidence": "Script uses PrEntity to select TrussEntity objects in the model. The cleanup routine explicitly uses collectEntities(..., _kModelSpace). Logic involves attaching TSL instances to the selected entities and calculating geometry based on the 3D realBody of the truss definition beams."
        },
        "prerequisites": {
          "requiredEntities": [
            "TrussEntity"
          ],
          "minimumBeams": 1,
          "requiredSpace": "Model Space",
          "requiredSettings": [
            "TrussDefinition object linked to the TrussEntity",
            "SubMap 'PROPERTIES' within TrussDefinition (for Tag/Label/Span/Ply data)",
            "PropSet 'TrussEntity' available in the drawing (optional, script attempts to attach it)"
          ]
        }
      },
      "tokens_used": 6610,
      "error": null
    },
    "3": {
      "success": true,
      "data": {
        "commandLine": {
          "insertionFlow": [
            {
              "step": 1,
              "function": "showDialogOnce",
              "promptOriginal": null,
              "condition": "_bOnInsert",
              "required": false
            },
            {
              "step": 2,
              "function": "PrEntity",
              "promptOriginal": "\nSelect a set of trusses",
              "condition": "_bOnInsert",
              "required": true
            }
          ],
          "keywordOptions": []
        },
        "dialogs": [],
        "opmProperties": [
          {
            "index": 0,
            "variable": "stEmpty1",
            "type": "PropString",
            "displayName": "- - - - - - - - - - - - - - - -",
            "defaultValue": "- - - - - - - - - - - - - - - -",
            "inputType": "text",
            "options": [],
            "category": null,
            "description": "DISPLAY PROPERTIES"
          },
          {
            "index": 1,
            "variable": "stDim",
            "type": "PropString",
            "displayName": "DimStyle",
            "defaultValue": "",
            "inputType": "dropdown",
            "options": "_DimStyles",
            "category": null,
            "description": null
          },
          {
            "index": 0,
            "variable": "dTH",
            "type": "PropDouble",
            "displayName": "Text Height (0 uses dimstyle)",
            "defaultValue": "0",
            "inputType": "number",
            "options": [],
            "category": null,
            "description": null
          },
          {
            "index": 2,
            "variable": "stDisplayText",
            "type": "PropString",
            "displayName": "Display Text",
            "defaultValue": "Label",
            "inputType": "dropdown",
            "options": [
              "Label",
              "Tag",
              "Tag - Label",
              "Label - Tag"
            ],
            "category": null,
            "description": null
          },
          {
            "index": 3,
            "variable": "stDispRepLabel",
            "type": "PropString",
            "displayName": "Label Display Rep",
            "defaultValue": "",
            "inputType": "dropdown",
            "options": "_ThisInst.dispRepNames()",
            "category": null,
            "description": null
          },
          {
            "index": 0,
            "variable": "iColorLabel",
            "type": "PropInt",
            "displayName": "Label Color",
            "defaultValue": "-1",
            "inputType": "number",
            "options": [],
            "category": null,
            "description": null
          },
          {
            "index": 4,
            "variable": "stDisplayLine",
            "type": "PropString",
            "displayName": "Display Center Line",
            "defaultValue": "Yes",
            "inputType": "dropdown",
            "options": [
              "Yes",
              "No"
            ],
            "category": null,
            "description": null
          },
          {
            "index": 5,
            "variable": "stDispRepLine",
            "type": "PropString",
            "displayName": "Center Line Display Rep",
            "defaultValue": "",
            "inputType": "dropdown",
            "options": "_ThisInst.dispRepNames()",
            "category": null,
            "description": null
          },
          {
            "index": 6,
            "variable": "stLineTypeLine",
            "type": "PropString",
            "displayName": "Line LineType",
            "defaultValue": "",
            "inputType": "dropdown",
            "options": "_LineTypes",
            "category": null,
            "description": null
          },
          {
            "index": 1,
            "variable": "iColorLine",
            "type": "PropInt",
            "displayName": "Line Color",
            "defaultValue": "-1",
            "inputType": "number",
            "options": [],
            "category": null,
            "description": null
          },
          {
            "index": 7,
            "variable": "stDisplayOutline",
            "type": "PropString",
            "displayName": "Display Outline",
            "defaultValue": "Yes",
            "inputType": "dropdown",
            "options": [
              "Yes",
              "No"
            ],
            "category": null,
            "description": null
          },
          {
            "index": 8,
            "variable": "stDispRepOutline",
            "type": "PropString",
            "displayName": "Outline Display Rep",
            "defaultValue": "",
            "inputType": "dropdown",
            "options": "_ThisInst.dispRepNames()",
            "category": null,
            "description": null
          },
          {
            "index": 9,
            "variable": "stLineTypeOutine",
            "type": "PropString",
            "displayName": "Outline LineType",
            "defaultValue": "",
            "inputType": "dropdown",
            "options": "_LineTypes",
            "category": null,
            "description": null
          },
          {
            "index": 2,
            "variable": "iColorOutline",
            "type": "PropInt",
            "displayName": "Outline Color",
            "defaultValue": "-1",
            "inputType": "number",
            "options": [],
            "category": null,
            "description": null
          },
          {
            "index": 10,
            "variable": "stEmpty2",
            "type": "PropString",
            "displayName": "- - - - - - - - - - - - - - - -",
            "defaultValue": "- - - - - - - - - - - - - - - -",
            "inputType": "text",
            "options": [],
            "category": null,
            "description": "TRUSS DFINITION PROPERTIES"
          },
          {
            "index": 11,
            "variable": "stTag",
            "type": "PropString",
            "displayName": "Tag",
            "defaultValue": "",
            "inputType": "text",
            "options": [],
            "category": null,
            "description": null
          },
          {
            "index": 12,
            "variable": "stLabel",
            "type": "PropString",
            "displayName": "Label",
            "defaultValue": "",
            "inputType": "text",
            "options": [],
            "category": null,
            "description": null
          },
          {
            "index": 13,
            "variable": "stTrussType",
            "type": "PropString",
            "displayName": "Truss Type",
            "defaultValue": "",
            "inputType": "text",
            "options": [],
            "category": null,
            "description": null
          },
          {
            "index": 1,
            "variable": "dSpan",
            "type": "PropDouble",
            "displayName": "Span",
            "defaultValue": "0",
            "inputType": "number",
            "options": [],
            "category": null,
            "description": null
          },
          {
            "index": 3,
            "variable": "iPly",
            "type": "PropInt",
            "displayName": "Ply",
            "defaultValue": "-1",
            "inputType": "number",
            "options": [],
            "category": null,
            "description": null
          }
        ],
        "contextMenu": [],
        "settingsFiles": []
      },
      "tokens_used": 9218,
      "error": null
    },
    "4": {
      "success": true,
      "data": {
        "raw_content": "```json\n{\n  \"scriptPurpose\": {\n    \"summary\": \"Generates a 2D symbolic representation (label, tag, outline, and centerline) for TrussEntities, typically used in floor plan or layout views to identify trusses without showing full 3D geometry.\",\n    \"category\": \"Annotation\",\n    \"typicalUseCase\": \"Creating clean 2D construction drawings or layouts where trusses need to be identified by Label/Tag and represented symbolically rather than as complex 3D objects.\"\n  },\n  \"parameters\": [\n    {\n      \"name\": \"stDim\",\n      \"technicalDefault\": \"\\\"\\\"\",\n      \"businessMeaning\": \"Selects the CAD dimension style (text font, arrow style, etc.) used for the truss label text.\",\n      \"validRange\": \"Any dimension style defined in the current drawing (e.g., 'Standard', 'ISO-25').\",\n      \"unit\": \"StyleName\",\n      \"affectsOutput\": \"Alters the font, size (if dTH is 0), and general appearance of the text label.\"\n    },\n    {\n      \"name\": \"dTH\",\n      \"technicalDefault\": \"0\",\n      \"businessMeaning\": \"Forces a specific text height for the truss label. If set to 0, the height is determined by the selected DimStyle.\",\n      \"validRange\": \"0 (Use DimStyle) to typically 12\\\"-24\\\" for large scale plans, or 1/4\\\"-1\\\" for details.\",\n      \"unit\": \"Length (inches)\",\n      \"affectsOutput\": \"Changes the size of the displayed text label. Overrides the DimStyle setting if > 0.\"\n    },\n    {\n      \"name\": \"stDisplayText\",\n      \"technicalDefault\": \"\\\"Label\\\"\",\n      \"businessMeaning\": \"Defines which data is shown in the text label attached to the truss.\",\n      \"validRange\": \"Label, Tag, Tag - Label, Label - Tag\",\n      \"unit\": \"Enum\",\n      \"affectsOutput\": \"Modifies the string content of the text annotation (e.g., 'T-1', 'TG-12', 'TG-12 - T-1').\"\n    },\n    {\n      \"name\": \"stDispRepLabel\",\n      \"technicalDefault\": \"\\\"\\\"\",\n      \"businessMeaning\": \"Selects the specific Display Representation (view style) in which the text label is visible.\",\n      \"validRange\": \"Any Display Representation defined in the drawing catalog.\",\n      \"unit\": \"DispRepName\",\n      \"affectsOutput\": \"Controls visibility of the text. If set to 'Plan', text shows in plan view but might hide in 3D or elevation.\"\n    },\n    {\n      \"name\": \"iColorLabel\",\n      \"technicalDefault\": \"-1\",\n      \"businessMeaning\": \"Sets the color of the truss label text. -1 usually inherits the color from the entity or layer.\",\n      \"validRange\": \"-1 (ByLayer) or 0-255 (AutoCAD Color Index).\",\n      \"unit\": \"ColorIndex\",\n      \"affectsOutput\": \"Visual color of the text entity.\"\n    },\n    {\n      \"name\": \"stDisplayLine\",\n      \"technicalDefault\": \"\\\"Yes\\\"\",\n      \"businessMeaning\": \"Toggles the visibility of the symbolic centerline (and circles for ply) of the truss.\",\n      \"validRange\": \"Yes, No\",\n      \"unit\": \"Boolean\",\n      \"affectsOutput\": \"Hides or shows the linear representation of the truss center axis.\"\n    },\n    {\n      \"name\": \"stDispRepLine\",\n      \"technicalDefault\": \"\\\"\\\"\",\n      \"businessMeaning\": \"Selects the Display Representation in which the centerline is visible.\",\n      \"validRange\": \"Any Display Representation defined in the drawing catalog.\",\n      \"unit\": \"DispRepName\",\n      \"affectsOutput\": \"Controls visibility of the centerline geometry based on the current view.\"\n    },\n    {\n      \"name\": \"stLineTypeLine\",\n      \"technicalDefault\": \"\\\"\\\"\",\n      \"businessMeaning\": \"Assigns a line type (dashed, hidden, center, etc.) to the truss centerline.\",\n      \"validRange\": \"Any line type loaded in the drawing (e.g., 'Continuous', 'Hidden', 'Center').\",\n      \"unit\": \"LineTypeName\",\n      \"affectsOutput\": \"Visual line style of the centerline.\"\n    },\n    {\n      \"name\": \"iColorLine\",\n      \"technicalDefault\": \"-1\",\n      \"businessMeaning\": \"Sets the color of the truss centerline.\",\n      \"validRange\": \"-1 (ByLayer) or 0-255 (AutoCAD Color Index).\",\n      \"unit\": \"ColorIndex\",\n      \"affectsOutput\": \"Visual color of the centerline entity.\"\n    },\n    {\n      \"name\": \"stDisplayOutline\",\n      \"technicalDefault\": \"\\\"Yes\\\"\",\n      \"businessMeaning\": \"Toggles the visibility of the truss perimeter outline (footprint) shape.\",\n      \"validRange\": \"Yes, No\",\n      \"unit\": \"Boolean\",\n      \"affectsOutput\": \"Hides or shows the 2D polygon representing the truss shape.\"\n    },\n    {\n      \"name\": \"stDispRepOutline\",\n      \"technicalDefault\": \"\\\"\\\"\",\n      \"businessMeaning\": \"Selects the Display Representation in which the outline is visible.\",\n      \"validRange\": \"Any Display Representation defined in the drawing catalog.\",\n      \"unit\": \"DispRepName\",\n      \"affectsOutput\": \"Controls visibility of the outline geometry based on the current view.\"\n    },\n    {\n      \"name\": \"stLineTypeOutine\",\n      \"technicalDefault\": \"\\\"\\\"\",\n      \"businessMeaning\": \"Assigns a line type to the truss outline.\",\n      \"validRange\": \"Any line type loaded in the drawing.\",\n      \"unit\": \"LineTypeName\",\n      \"affectsOutput\": \"Visual line style of the truss outline.\"\n    },\n    {\n      \"name\": \"iColorOutline\",\n      \"technicalDefault\": \"-1\",\n      \"businessMeaning\": \"Sets the color of the truss outline.\",\n      \"validRange\": \"-1 (ByLayer) or 0-255 (AutoCAD Color Index).\",\n      \"unit\": \"ColorIndex\",\n      \"affectsOutput\": \"Visual color of the outline entity.\"\n    },\n    {\n      \"name\": \"stTag\",\n      \"technicalDefault\": \"\\\"\\\"\",\n      \"businessMeaning\": \"The unique identifier (Tag) of the truss, usually derived from the Truss Definition or Properties map.\",\n      \"validRange\": \"String (e.g., 'T-101', 'Truss-A').\",\n      \"unit\": \"String\",\n      \"affectsOutput\": \"Populates the 'Tag' portion of the text label if 'stDisplayText' includes Tag. Read-Only in this script (updated from source).\"\n    },\n    {\n      \"name\": \"stLabel\",\n      \"technicalDefault\": \"\\\"\\\"\",\n      \"businessMeaning\": \"The descriptive name or designation of the truss type (e.g., 'Standard Girder', 'Scissor').\",\n      \"validRange\": \"String.\",\n      \"unit\": \"String\",\n      \"affectsOutput\": \"Populates the 'Label' portion of the text label if 'stDisplayText' includes Label. Read-Only in this script.\"\n    },\n    {\n      \"name\": \"stTrussType\",\n      \"technicalDefault\": \"\\\"\\\"\",\n      \"businessMeaning\": \"Categorical classification of the truss (e.g., 'Fink', ' Howe').\",\n      \"validRange\": \"String.\",\n      \"unit\": \"String\",\n      \"affectsOutput\": \"Informational only in this script; read from the Truss Definition but not directly drawn in the label.\"\n    },\n    {\n      \"name\": \"dSpan\",\n      \"technicalDefault\": \"0\",\n      \"businessMeaning\": \"The horizontal span (length) of the truss.\",\n      \"validRange\": \"Typical spans 10' to 60'+.\",\n      \"unit\": \"Length (inches)\",\n      \"affectsOutput\": \"Informational; stored/synchronized with the Truss Entity properties but does not change the visual representation size here.\"\n    },\n    {\n      \"name\": \"iPly\",\n      \"technicalDefault\": \"-1\",\n      \"businessMeaning\": \"The number of plies (layers of beams) in the truss.\",\n      \"validRange\": \"Integer >= 1 (e.g., 1, 2, 3).\",\n      \"unit\": \"Count\",\n      \"affectsOutput\": \"Determines how many centerlines and circles are drawn in the centerline display. If > 1, multiple lines are spaced across the width.\"\n    }\n  ],\n  \"parameterDependencies\": [\n    {\n      \"trigger\": \"dTH is set to 0\",\n      \"effect\": \"Text height is ignored and the DimStyle ('stDim') text height setting is used.\",\n      \"cascade\": [\n        \"stDim\"\n      ]\n    },\n    {\n      \"trigger\": \"iPly changes\",\n      \"effect\": \"The number of graphical centerlines drawn changes.\",\n      \"cascade\": [\n        \"stDisplayLine\"\n      ]\n    },\n    {\n      \"trigger\": \"stDisplayText changes\",\n      \"effect\": \"The content of the label uses 'stTag' and/or 'stLabel' values.\",\n      \"cascade\": [\n        \"st"
      },
      "tokens_used": 10553,
      "error": null
    },
    "5": {
      "success": true,
      "data": {
        "workflowDiagram": [
          "1. User launches script (GE_TRUSS_LABEL).",
          "2. [Insert Phase] If `_bOnInsert` is true (First run): Execute `showDialogOnce()` to display initial properties dialog.",
          "3. Store current script properties into a Map named 'mpProps'.",
          "4. Prompt user with `PrEntity` to select a set of TrussEntities.",
          "5. User selects Trusses and confirms (ssE.go()).",
          "6. Iterate through selected entities:",
          "   a. Validate entity is a `TrussEntity`.",
          "   b. Retrieve `TrussDefinition` and generate GenBeams to calculate geometry (envelope).",
          "   c. Calculate text insertion point (`_Pt0`) based on truss width and length.",
          "   d. Check for existing instances of this script attached to the current TrussEntity within its groups.",
          "   e. [Cleanup] If found, erase existing TSL instances to prevent duplicates.",
          "   f. Insert new TSL instance attached to the TrussEntity at calculated location.",
          "7. Erase the original 'seed' instance used for insertion.",
          "8. [Calculation Phase - per TSL instance] Load properties from 'mpProps' map.",
          "9. Validate `_Entity[0]` is attached to the instance.",
          "10. Validate entity is a valid TrussEntity. If invalid, report error and erase instance.",
          "11. Extract Truss coordinate system (`csTe`) and `TrussDefinition` (`td`).",
          "12. Calculate real body geometry by transforming beams from the definition to the instance location.",
          "13. Determine extreme points (X, Y, Z) to define the truss footprint (corners).",
          "14. [Data Mapping] Check TrussDefinition SubMap 'PROPERTIES':",
          "   - If exists, extract Tag, Label, TrussType, Span, and Ply.",
          "   - Update read-only script properties (`stTag`, `stLabel`, etc.).",
          "   - [PropSet Sync] If PropSet 'TrussEntity' exists in drawing but not attached to entity, attach it.",
          "   - Update the entity's attached PropSet with the map data.",
          "15. [Draw - Centerline] If `stDisplayLine` == 'Yes':",
          "   - Calculate number of lines based on `iPly` (default to 1 if < 1).",
          "   - Draw lines and circles in 'Truss Line (Solid)' display rep.",
          "   - Draw lines and circles in user-defined Display Rep (`stDispRepLine`) with specific LineType.",
          "16. [Draw - Outline] If `stDisplayOutline` == 'Yes':",
          "   - Create convex hull from calculated corner points.",
          "   - Draw outline in 'Truss Outline (Solid)' and 'Truss Outline (Hidden)' reps.",
          "   - Draw outline in user-defined Display Rep (`stDispRepOutline`).",
          "17. [Draw - Label] Construct text string based on `stDisplayText` (Label/Tag combos).",
          "   - Determine text orientation (readable relative to view).",
          "   - Draw text at `_Pt0` using specified DimStyle and height."
        ],
        "conditionalBranches": [
          {
            "condition": "User selection during PrEntity prompt",
            "path1": {
              "name": "Valid Selection",
              "steps": [
                "Process array of selected entities.",
                "Generate labels for each valid TrussEntity."
              ]
            },
            "path2": {
              "name": "Empty/Invalid Selection",
              "steps": [
                "Script proceeds (but loop is empty).",
                "Seed instance is erased. Nothing is created."
              ]
            }
          },
          {
            "condition": "TrussDefinition SubMap 'PROPERTIES' exists",
            "path1": {
              "name": "Data Available",
              "steps": [
                "Populate Tag, Label, Span, Ply from map.",
                "Set properties to Read-Only.",
                "Update Entity PropSet."
              ]
            },
            "path2": {
              "name": "Data Missing",
              "steps": [
                "Fallback to Definition Name for Tag.",
                "Set Label/Type/Span/Ply properties to Read-Write (or 0/-1).",
                "Do not update Entity PropSet."
              ]
            }
          },
          {
            "condition": "Property Set 'TrussEntity' in Drawing",
            "path1": {
              "name": "Attached",
              "steps": [
                "Update existing instance on the TrussEntity with values from TrussDefinition."
              ]
            },
            "path2": {
              "name": "Not Attached",
              "steps": [
                "Attach PropSet 'TrussEntity' to the TrussEntity.",
                "Populate with values from TrussDefinition."
              ]
            }
          },
          {
            "condition": "iPly value",
            "path1": {
              "name": "iPly > 1",
              "steps": [
                "Draw iPly number of centerlines and circles spaced across the truss width."
              ]
            },
            "path2": {
              "name": "iPly <= 1",
              "steps": [
                "Draw single centerline and single circle."
              ]
            }
          }
        ],
        "validationRules": [
          {
            "check": "Entity attached to TSL instance is a valid TrussEntity",
            "errorMessage": "Not a valid Truss Entity",
            "recovery": "Instance erases itself automatically."
          },
          {
            "check": "Truss geometry (real body) can be calculated from definition beams",
            "errorMessage": "Problem finding body shape of truss [DefinitionName]",
            "recovery": "Script halts drawing for this instance (returns), leaving the TSL instance in the tree but empty/visible geometry."
          }
        ],
        "postInsertionActions": [
          {
            "action": "Modify Display Settings (DimStyle, Colors, Display Reps)",
            "how": "OPM (Object Properties Palette)",
            "effect": "Instant visual update of the label, lines, and outline visibility/style."
          },
          {
            "action": "Edit Text Content/Source",
            "how": "OPM - stDisplayText dropdown, or editing the source TrussDefinition SubMap 'PROPERTIES'",
            "effect": "Changes the text string shown on the label (e.g., swapping Tag for Label)."
          },
          {
            "action": "Move Label Location",
            "how": "Grip Edit (Move Point - _Pt0)",
            "effect": "Relocates the text label relative to the truss."
          },
          {
            "action": "Delete Label",
            "how": "AutoCAD Erase command or context menu",
            "effect": "Removes the TSL instance. The underlying TrussEntity remains."
          }
        ]
      },
      "tokens_used": 11710,
      "error": null
    },
    "6": {
      "success": true,
      "data": {
        "markdown": "# GE_TRUSS_LABEL.mcr\n\n## Overview\nThis script generates 2D symbolic labels and layout representations for TrussEntities. It creates clean construction drawings by displaying the Truss Tag/Label, a symbolic centerline, and a perimeter outline based on the Truss Definition properties.\n\n## Usage Environment\n| Space | Supported | Notes |\n|-------|-----------|-------|\n| Model Space | Yes | This script is intended for model layout views. |\n| Paper Space | No | Cannot be inserted directly into Paper Space. |\n| Shop Drawing | No | Not designed for Shop Drawing generation. |\n\n## Prerequisites\n- **Required Entities**: At least one `TrussEntity` in the drawing.\n- **Configuration**: The TrussEntity must be linked to a `TrussDefinition`.\n- **Data Source**: The `TrussDefinition` should contain a SubMap named `PROPERTIES` with keys for Tag, Label, Span, and Ply.\n\n## Usage Steps\n\n### Step 1: Launch Script\nRun the command `TSLINSERT` in the AutoCAD command line and select `GE_TRUSS_LABEL.mcr` from the file browser.\n\n### Step 2: Configure Initial Properties (Optional)\nAn initial properties dialog may appear (`showDialogOnce`). Adjust settings like text height or visibility if desired, or press OK to accept defaults.\n\n### Step 3: Select Trusses\n```\nCommand Line: Select a set of trusses\nAction: Click on one or more TrussEntities in the model view and press Enter.\n```\n*Note: The script will process all selected trusses. If a truss already has a label from this script, the old one will be replaced.*\n\n## Properties Panel Parameters\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| **DimStyle** | Dropdown | *Current Style* | Selects the CAD Dimension Style to control text font and appearance. |\n| **Text Height** | Number | 0 | Sets the text height. If 0, the height defined in the DimStyle is used. |\n| **Display Text** | Dropdown | Label | Determines what text is shown: \"Label\", \"Tag\", \"Tag - Label\", or \"Label - Tag\". |\n| **Label Display Rep** | Dropdown | *All* | Selects the Display Representation (e.g., Plan, Elevation) where the text is visible. |\n| **Label Color** | Integer | -1 | Sets the color of the text (-1 = ByLayer). |\n| **Display Center Line** | Dropdown | Yes | Toggles the visibility of the truss centerline axis. |\n| **Center Line Display Rep** | Dropdown | *All* | Selects the Display Representation where the centerline is visible. |\n| **Line LineType** | Dropdown | *Current* | Sets the Line Type (e.g., Hidden, Center) for the centerline. |\n| **Line Color** | Integer | -1 | Sets the color of the centerline (-1 = ByLayer). |\n| **Display Outline** | Dropdown | Yes | Toggles the visibility of the truss footprint/perimeter outline. |\n| **Outline Display Rep** | Dropdown | *All* | Selects the Display Representation where the outline is visible. |\n| **Outline LineType** | Dropdown | *Current* | Sets the Line Type for the outline. |\n| **Outline Color** | Integer | -1 | Sets the color of the outline (-1 = ByLayer). |\n| **Tag** | String | *From Map* | The Truss Tag (e.g., \"T-1\"). Read from Truss Definition. |\n| **Label** | String | *From Map* | The Truss Label name. Read from Truss Definition. |\n| **Truss Type** | String | *From Map* | The type of truss (e.g., \"Fink\"). Read from Truss Definition. |\n| **Span** | Number | *From Map* | The length of the truss. Read from Truss Definition. |\n| **Ply** | Integer | *From Map* | The number of plies (layers). Affects the number of centerlines drawn. |\n\n## Right-Click Menu Options\n\n| Menu Item | Description |\n|-----------|-------------|\n| None Specific | No custom context menu items are defined by this script. Standard AutoCAD/TSL options apply. |\n\n## Settings Files\n- **Filename**: None\n- **Location**: N/A\n- **Purpose**: This script reads data directly from the `TrussDefinition` SubMap 'PROPERTIES' and does not require external XML settings files.\n\n## Tips\n- **Multi-Ply Trusses**: If the `Ply` property is greater than 1, the script will automatically draw multiple centerlines and circles to represent the individual plies.\n- **Moving Labels**: You can grip-edit the label position to move the text relative to the truss without moving the truss itself.\n- **Data Sync**: The script attempts to attach a Property Set named `TrussEntity` to your truss if it is missing, populating it with data from the definition.\n- **Visibility**: Use the `Display Rep` properties to control which labels show in Plan view vs. 3D view (e.g., hide outlines in 3D but keep them in Plan).\n\n## FAQ\n- **Q: Why is my text blank?**\n  **A:** Check if the `TrussDefinition` linked to your TrussEntity has the `PROPERTIES` SubMap populated with values for Label and Tag. If the map is missing or empty, the script has nothing to display.\n- **Q: How do I change the size of just one label?**\n  **A:** Select the TSL instance (label), open the Properties palette (Ctrl+1), and change the `Text Height` value. Set it to a non-zero value to override the DimStyle.\n- **Q: I see multiple lines for my truss, but it's a single truss.**\n  **A:** Check the `Ply` property in the Properties palette. If it is set to 2 or 3, the script draws lines for each ply. Set it to 1 to show a single line."
      },
      "tokens_used": 9072,
      "error": null
    }
  }
}