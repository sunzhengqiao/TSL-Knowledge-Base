{
  "filename": "GE_HDWR_ANCHOR_J-BOLT.mcr",
  "status": "completed",
  "total_tokens": 30151,
  "processing_time": 535.7127919197083,
  "passes": {
    "1": {
      "success": true,
      "data": {
        "header": {
          "type": null,
          "numBeamsReq": null,
          "keywords": [],
          "majorVersion": null,
          "minorVersion": null,
          "dxaOut": null,
          "implInsert": null
        },
        "description": "",
        "versionHistory": [
          {
            "version": "v1.2",
            "date": "15.jun.2014",
            "author": "David Rueda (dr@hsb-cad.com)",
            "changes": "TSL can now be inserted by other hardware systems"
          },
          {
            "version": "v1.1",
            "date": "27.nov.2012",
            "author": "David Rueda (dr@hsb-cad.com)",
            "changes": "Version control (several enhancements, coordinated with Manish Patel and Marcelo Quevedo)"
          },
          {
            "version": "v1.0",
            "date": "14.nov.2012",
            "author": "David Rueda (dr@hsb-cad.com)",
            "changes": "Release. Created as dummy only, insertion yet to be coded. Will be useful inserted from outside"
          }
        ],
        "settingsFiles": [],
        "dependencies": []
      },
      "tokens_used": 5137,
      "error": null
    },
    "2": {
      "success": true,
      "data": {
        "usageEnvironment": {
          "primarySpace": "ModelSpace",
          "supportsPaperSpace": false,
          "isShopDrawingScript": false,
          "isMultipageScript": false,
          "detectionEvidence": "Script constructs 3D geometry using 'Body' objects (bdRod, bdNut, bdSquareWasher) and renders them via 'Display dp'. It utilizes 'Vector3d' and 'Point3d' for spatial calculations relative to '_Pt0'. No 'sd_' prefixes, '_Viewport' checks, or paper space specific entities are present. The script erases itself on manual insert, indicating it is a 3D component (hardware) inserted programmatically."
        },
        "prerequisites": {
          "requiredEntities": [],
          "minimumBeams": 0,
          "requiredSpace": "Model Space",
          "requiredSettings": []
        }
      },
      "tokens_used": 4677,
      "error": null
    },
    "3": {
      "success": true,
      "data": {
        "commandLine": {
          "insertionFlow": [],
          "keywordOptions": []
        },
        "dialogs": [],
        "opmProperties": [
          {
            "index": 0,
            "variable": "sType",
            "type": "PropString",
            "displayName": "Anchor type",
            "defaultValue": "1/2 J_Bolt",
            "inputType": "dropdown",
            "options": [
              "1/2 J_Bolt",
              "5/8 J_Bolt",
              "7/8 J_Bolt"
            ],
            "category": null,
            "description": null
          }
        ],
        "contextMenu": [],
        "settingsFiles": []
      },
      "tokens_used": 3386,
      "error": null
    },
    "4": {
      "success": true,
      "data": {
        "scriptPurpose": {
          "summary": "Generates the 3D representation of a J-Bolt concrete anchor, including the threaded rod, J-hook, nut, and square plate washer.",
          "category": "Hardware",
          "typicalUseCase": "Inserted programmatically by other scripts (such as beam end or column base macros) to visualize foundation anchoring hardware in a 3D BIM model."
        },
        "parameters": [
          {
            "name": "sType",
            "technicalDefault": "\"1/2 J_Bolt\"",
            "businessMeaning": "Selects the nominal diameter of the J-Bolt rod. This corresponds to standard trade sizes for concrete anchor bolts.",
            "validRange": "1/2 J_Bolt, 5/8 J_Bolt, 7/8 J_Bolt",
            "unit": "Inches (implied by fractions)",
            "affectsOutput": "Determines the thickness of the rod and the dimensions of the nut and washer geometry (Note: The provided snippet shows hardcoded geometry values, but the property intent is clearly diameter selection)."
          }
        ],
        "parameterDependencies": [
          {
            "trigger": "Map Directive (InsertedByDirective)",
            "effect": "Locks the 'sType' property to read-only to prevent manual editing when the anchor is managed by a parent system.",
            "cascade": [
              "sType.readOnly"
            ]
          },
          {
            "trigger": "Map Directive (HideWasherAndNuts)",
            "effect": "Suppresses the generation of the nut and washer geometry, rendering only the J-Bolt rod.",
            "cascade": [
              "bdNut",
              "bdSquareWasher"
            ]
          }
        ],
        "outputEntities": [
          {
            "type": "3D Body (Visualization)",
            "description": "Generates three distinct body primitives: a cylinder for the main rod, a cylinder segment for the bent 'J' arm, a hexagonal prism for the nut, and a square prism for the washer.",
            "appliedTo": "Model Space (located at _Pt0 with orientation defined by vx, vy, vz)."
          }
        ]
      },
      "tokens_used": 5909,
      "error": null
    },
    "5": {
      "success": true,
      "data": {
        "workflowDiagram": [
          "1. Script execution triggered (Insertion or Recalculation).",
          "2. [Conditional] Check for manual insertion flag (_bOnInsert).",
          "3. Initialize Display object and default orientation vectors (vx, vy, vz).",
          "4. [Conditional] Check _Map for insertion directives (ANCHORTYPE, vx/vy/vz, HideWasherAndNuts, InsertedByDirective).",
          "5. [Conditional] Read property sType from OPM if not set by Map.",
          "6. [Conditional] Set sType to read-only if InsertedByDirective is true.",
          "7. [Conditional] Link to host Element if _Element.length == 1.",
          "8. Generate 3D geometry for Rod (Cylinder) and J-Hook (Cylinder segment).",
          "9. Draw Rod and J-Hook.",
          "10. [Conditional] Check bHideWasherAndNuts flag.",
          "11. [Conditional] Generate and Draw Nut (Hexagonal prism) and Square Washer (Square prism)."
        ],
        "conditionalBranches": [
          {
            "condition": "Manual Insertion Attempt (_bOnInsert)",
            "path1": {
              "name": "Manual Insert",
              "steps": [
                "Display error message stating manual insertion is not supported.",
                "Call eraseInstance() to immediately remove the script from the drawing."
              ]
            },
            "path2": {
              "name": "Programmatic Insert",
              "steps": [
                "Proceed to Map data ingestion."
              ]
            }
          },
          {
            "condition": "Hardware Visibility (bHideWasherAndNuts)",
            "path1": {
              "name": "Rod Only",
              "steps": [
                "Script returns immediately after drawing the rod.",
                "Nut and Washer geometry is not generated."
              ]
            },
            "path2": {
              "name": "Complete Hardware",
              "steps": [
                "Generate geometry for Nuts.",
                "Generate geometry for Square Washers.",
                "Draw Nuts and Washers to Display."
              ]
            }
          },
          {
            "condition": "Data Source for Anchor Type",
            "path1": {
              "name": "Map Directive",
              "steps": [
                "Read 'ANCHORTYPE' from _Map.",
                "Find index in sSizes array and set sType property."
              ]
            },
            "path2": {
              "name": "Default/OPM",
              "steps": [
                "Use the current value of the sType property (default or user-edited)."
              ]
            }
          }
        ],
        "validationRules": [
          {
            "check": "Manual insertion trigger",
            "errorMessage": "\"Message from GE_HDWR_ANCHOR_J-BOLT: This TSL has not yet a manual insertion defined. It can be inserted only by other script. Instance will be erased\"",
            "recovery": "N/A (Instance is automatically erased)"
          }
        ],
        "postInsertionActions": [
          {
            "action": "Change Anchor Type",
            "how": "OPM (Object Properties Palette)",
            "effect": "Updates the 'sType' property. Note: The provided script code snippet shows hardcoded geometry values, so changing this property may not dynamically update the visual rod size in this specific version, but the property value itself updates."
          },
          {
            "action": "Delete linked Element",
            "how": "AutoCAD Erase command",
            "effect": "If the script instance is linked to a specific Element (_Element[0]), deleting that element triggers _bOnElementDeleted, causing the script instance to erase itself."
          }
        ]
      },
      "tokens_used": 6210,
      "error": null
    },
    "6": {
      "success": true,
      "data": {
        "markdown": "# GE_HDWR_ANCHOR_J-BOLT.mcr\n\n## Overview\nThis script generates the 3D representation of a J-Bolt concrete anchor, including the threaded rod, J-hook, nut, and square plate washer. It is intended to be inserted programmatically by other hardware systems (such as column bases or beam end macros) rather than manually by the user.\n\n## Usage Environment\n| Space | Supported | Notes |\n|-------|-----------|-------|\n| Model Space | Yes | This is the primary environment for the 3D hardware model. |\n| Paper Space | No | |\n| Shop Drawing | No | |\n\n## Prerequisites\n- **Required entities**: None (typically controlled by a parent script).\n- **Minimum beam count**: 0.\n- **Required settings files**: None.\n\n## Usage Steps\n\n### Step 1: Manual Insertion Attempt\n```\nCommand Line: TSLINSERT\nAction: Selecting GE_HDWR_ANCHOR_J-BOLT.mcr manually will trigger an error message.\nResult: The script will display a warning (\"This TSL has not yet a manual insertion defined...\") and automatically erase itself.\n```\n**Note**: This script is designed to be launched by other scripts using Map Directives. To use this component, run the parent script (e.g., a column base or connector macro) that calls this anchor.\n\n## Properties Panel Parameters\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| Anchor type | dropdown | 1/2 J_Bolt | Selects the nominal diameter of the J-Bolt. Options: 1/2 J_Bolt, 5/8 J_Bolt, 7/8 J_Bolt. |\n\n## Right-Click Menu Options\n\n| Menu Item | Description |\n|-----------|-------------|\n| (None available) | This script does not define custom right-click context menu options. |\n\n## Settings Files\n(None defined in the source analysis)\n\n## Tips\n- **Programmatic Use**: Do not attempt to insert this script directly via the command line. It functions as a sub-component for other hsbCAD elements.\n- **Editing Properties**: If the script is inserted by a parent system that allows configuration, you can select the anchor in the model and change the \"Anchor type\" via the Properties Palette (Ctrl+1).\n- **Visibility**: Depending on the parent script settings, the nut and washer may be hidden, showing only the rod.\n\n## FAQ\n- **Q: Why does the script disappear immediately when I try to insert it?**\n  - A: This script does not support manual insertion. It is designed to be called automatically by other macros to ensure correct positioning and data linkage.\n\n- **Q: How do I change the bolt size?**\n  - A: Select the J-Bolt object in the drawing, open the Properties Palette, and select a different size from the \"Anchor type\" dropdown list, provided it is not locked by the parent script."
      },
      "tokens_used": 4832,
      "error": null
    }
  }
}