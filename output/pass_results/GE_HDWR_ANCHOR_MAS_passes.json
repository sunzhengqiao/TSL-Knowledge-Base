{
  "filename": "GE_HDWR_ANCHOR_MAS.mcr",
  "status": "partial",
  "total_tokens": 33357,
  "processing_time": 1023.0133588314056,
  "passes": {
    "1": {
      "success": true,
      "data": {
        "header": {
          "type": null,
          "numBeamsReq": null,
          "keywords": null,
          "majorVersion": null,
          "minorVersion": null,
          "dxaOut": null,
          "implInsert": null
        },
        "description": null,
        "versionHistory": [
          {
            "version": "1.1",
            "date": "04.jul.2014",
            "author": "David Rueda (dr@hsb-cad.com)",
            "changes": "Bug fix: Entity (ies) not associated properly, causing unexpected behavior when framing. Edited GE_HDWR_ANCHOR_MAS and GE_HDWR_WALL_ANCHOR_MULTIPLE. Problem Solved. Added feature: when wall is unframed MAS TSL's are still present, but display only a cross at bottom of wall so user will know this element has already anchors. When wall is framed, the display of metal part is completely done, wrapping bottom plate(s) and embedded also. Added feature: MAS TSL will erase itself if is closer than 2in to other MAS"
          },
          {
            "version": "1.0",
            "date": "17.jun.2014",
            "author": "David Rueda (dr@hsb-cad.com)",
            "changes": "Release"
          }
        ],
        "settingsFiles": [],
        "dependencies": []
      },
      "tokens_used": 6087,
      "error": null
    },
    "2": {
      "success": true,
      "data": {
        "usageEnvironment": {
          "primarySpace": "ModelSpace",
          "supportsPaperSpace": false,
          "isShopDrawingScript": false,
          "isMultipageScript": false,
          "detectionEvidence": "The script prompts for an Element using getElement() and checks bIsKindOf(Wall()). It attaches to the element using assignToElementGroup() and creates 3D geometry (Body objects: bdEmbedded, bdBottomWrap) drawn with Display dp(-1). No usage of _Viewport, sd_ prefixes, or 2D drawing layout logic found."
        },
        "prerequisites": {
          "requiredEntities": [
            "ElementWall"
          ],
          "minimumBeams": 0,
          "requiredSpace": "Model Space attached to a Wall element.",
          "requiredSettings": []
        }
      },
      "tokens_used": 5403,
      "error": null
    },
    "3": {
      "success": true,
      "data": {
        "commandLine": {
          "insertionFlow": [
            {
              "step": 1,
              "function": "getElement",
              "promptOriginal": "|Select element|",
              "condition": "_bOnInsert",
              "required": true
            },
            {
              "step": 2,
              "function": "PrPoint",
              "promptOriginal": "\nSelect a set of points along wall (points will get proper high automatically. Wall side will be the closer to selected points)",
              "condition": "_bOnInsert",
              "required": true
            }
          ],
          "keywordOptions": []
        },
        "dialogs": [],
        "opmProperties": [],
        "contextMenu": [],
        "settingsFiles": []
      },
      "tokens_used": 5801,
      "error": null
    },
    "4": {
      "success": true,
      "data": {
        "scriptPurpose": {
          "summary": "Generates 3D models for 'MAS' (Masonry Anchor Strap) hardware, embedding anchors into the foundation and wrapping them around the bottom plate of a wall.",
          "category": "Hardware",
          "typicalUseCase": "Used to place anchors along a wall bottom plate that require structural hold-downs wrapping the plate and embedding into the concrete below."
        },
        "parameters": [
          {
            "name": "dMinDist",
            "technicalDefault": "U(2)",
            "businessMeaning": "The minimum spacing required between anchor points. If a new anchor is placed closer than this to an existing one, the script deletes the new instance to prevent overcrowding.",
            "validRange": "2.0 to 24.0 inches",
            "unit": "inch",
            "affectsOutput": "Controls the existence of the script instance (self-erasure) based on proximity."
          },
          {
            "name": "ptSelected",
            "technicalDefault": "User Input (Array)",
            "businessMeaning": "Points selected by the user along the wall to define anchor locations. The Z-coordinate (height) is calculated automatically based on the wall geometry.",
            "validRange": "Any point along the wall length in 3D space",
            "unit": "inch",
            "affectsOutput": "Determines the insertion point (_Pt0) for each cloned anchor instance."
          },
          {
            "name": "dBottomPlateBracesLength",
            "technicalDefault": "U(10)",
            "businessMeaning": "The total available length of the metal strap to wrap around the bottom plate.",
            "validRange": "4.0 to 20.0 inches",
            "unit": "inch",
            "affectsOutput": "Limits how far the strap extends along the length of the bottom plate before stopping."
          },
          {
            "name": "dBottomPlateSingleBraceWidth",
            "technicalDefault": "U(1)",
            "businessMeaning": "The width of one leg of the metal strap wrapping around the plate.",
            "validRange": "0.75 to 2.0 inches",
            "unit": "inch",
            "affectsOutput": "Determines the width of the wrap geometry on the bottom and vertical faces of the plate."
          },
          {
            "name": "dSeparationBetweenBottomPlateBraces",
            "technicalDefault": "U(.25)",
            "businessMeaning": "The gap between the two legs of the strap around the plate.",
            "validRange": "0.125 to 1.0 inches",
            "unit": "inch",
            "affectsOutput": "Controls the distance between the two distinct Body objects created for the wrap."
          },
          {
            "name": "dThickness",
            "technicalDefault": "U(0.125)",
            "businessMeaning": "The thickness (gauge) of the steel strap material.",
            "validRange": "0.048 to 0.25 inches",
            "unit": "inch",
            "affectsOutput": "Sets the extrusion depth of the 3D body geometry."
          },
          {
            "name": "dEmbeddedLength",
            "technicalDefault": "U(6)",
            "businessMeaning": "The length of the anchor tail extending into the foundation/concrete.",
            "validRange": "4.0 to 12.0 inches",
            "unit": "inch",
            "affectsOutput": "Determines the length of the 'embedded' body geometry."
          },
          {
            "name": "dAngle",
            "technicalDefault": "45",
            "businessMeaning": "The angle at which the anchor tail enters the wall relative to the wall surface.",
            "validRange": "30 to 60 degrees",
            "unit": "degrees",
            "affectsOutput": "Rotates the embedded tail geometry away from the perpendicular."
          }
        ],
        "parameterDependencies": [
          {
            "trigger": "dBottomPlateSingleBraceWidth OR dSeparationBetweenBottomPlateBraces changes",
            "effect": "Updates the total width of the embedded anchor section.",
            "cascade": [
              "dEmbeddedWidth"
            ]
          },
          {
            "trigger": "Wall Element has no Beams (Unframed)",
            "effect": "Suppresses the 3D metal body generation and draws a 2D cross marker instead.",
            "cascade": [
              "bdEmbedded",
              "bdBottomWrap",
              "bdVerticalWrap",
              "bdTopWrap"
            ]
          },
          {
            "trigger": "Insertion Point < dMinDist from Existing Anchor",
            "effect": "Triggers self-deletion of the current script instance.",
            "cascade": [
              "Script Existence"
            ]
          }
        ],
        "outputEntities": [
          {
            "type": "Body (Metal Part)",
            "description": "Generates 3D bodies representing the anchor strap: an angled embedded section and a wrap section covering the bottom, vertical, and top faces of the bottom plate.",
            "appliedTo": "ElementWall (Parent)"
          },
          {
            "type": "PLine (Visual Marker)",
            "description": "A temporary 'X' marker drawn when the wall is unframed to indicate anchor placement location.",
            "appliedTo": "ModelSpace (Visual Only)"
          }
        ]
      },
      "tokens_used": 6704,
      "error": null
    },
    "5": {
      "success": true,
      "data": {
        "raw_content": "```json\n{\n  \"workflowDiagram\": [\n    \"Script launched via command or catalog insertion.\",\n    \"Check insert cycle: If not the first cycle (insertCycleCount > 1), erase instance and stop.\",\n    \"Prompt user to select an Element.\",\n    \"Validate selection: If entity is not a Wall (el.bIsKindOf(Wall) == false), erase instance and stop.\",\n    \"Prompt user to select a set of points along the wall (loop for multiple inputs).\",\n    \"For each selected point, create a new cloned instance of the script at that location.\",\n    \"Erase the original 'master' script instance and exit the insertion routine.\",\n    \"Initialize cloned instance: Retrieve ElementWall and check validity.\",\n    \"Attach script to Wall element and set dependencies.\",\n    \"Update internal references: Retrieve wall beams if ExecutionMode is 0 or if wall is constructed/recalced.\",\n    \"Calculate wall coordinate system and filter beams to find Bottom Plates.\",\n    \"Realign insertion point (_Pt0) to snap to the wall surface.\",\n    \"Check Wall Framing Status: Determine if beams exist in the wall.\",\n    \"[Decision] Is Wall Unframed? (bmAll.length == 0)\",\n    \"If YES (Unframed): Draw 2D 'X' cross marker at insertion point and stop execution.\",\n    \"If NO (Framed): Calculate geometry based on bottom plate stack (highest and lowest plates).\",\n    \"Run Proximity Check: Compare distance to other identical script instances along the wall.\",\n    \"[Decision] Is another anchor closer than minimum distance (2in)?\",\n    \"If YES (Too Close): Erase current instance and stop.\",\n    \"If NO (Safe): Calculate vectors for the embedded anchor tail.\",\n    \"Generate and draw Embedded Body (angled into foundation).\",\n    \"Calculate and draw Bottom Wrap Body (wrapping under bottom plate).\",\n    \"[Decision] Is remaining strap length sufficient for vertical wrap?\",\n    \"If YES: Generate and draw Vertical Wrap Body (wrapping front face of plate).\",\n    \"If NO: Stop drawing.\",\n    \"[Decision] Is remaining strap length sufficient for top wrap?\",\n    \"If YES: Generate and draw Top Wrap Body (wr"
      },
      "tokens_used": 9362,
      "error": null
    },
    "6": {
      "success": false,
      "data": {},
      "tokens_used": 0,
      "error": "Request timeout after retries"
    }
  }
}