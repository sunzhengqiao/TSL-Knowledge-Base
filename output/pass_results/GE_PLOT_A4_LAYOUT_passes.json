{
  "filename": "GE_PLOT_A4_LAYOUT.mcr",
  "status": "partial",
  "total_tokens": 36984,
  "processing_time": 1619.1912565231323,
  "passes": {
    "1": {
      "success": true,
      "data": {
        "header": {
          "type": null,
          "numBeamsReq": null,
          "keywords": [],
          "majorVersion": null,
          "minorVersion": null,
          "dxaOut": null,
          "implInsert": null
        },
        "description": "",
        "versionHistory": [
          {
            "version": "v1.0",
            "date": "15.mar.2013",
            "author": "David Rueda (dr@hsb-cad.com)",
            "changes": "Copied from hsb_A4 Layout, to keep US content folder naming standards\n- Thumbnail added"
          },
          {
            "version": "v1.56",
            "date": "15.mar.2013",
            "author": "David Rueda (dr@hsb-cad.com)",
            "changes": "Version control from 1.0 to 1.56, to keep updated with hsb_A4 Layout"
          },
          {
            "version": "v1.57",
            "date": "24.mar.2013",
            "author": "David Rueda (dr@hsb-cad.com)",
            "changes": "Option to show vertical dimline names: \"Blocking\", \"Opening\", \"Wall height\" (No/Yes)\n- Option to move vertical blocking dimline to left/right side of element \n- Offset from element for vertical blocking dimline (when at left side)\n- Option to define dimpoints for blocking dimension line (bottom, center or top of blocking)"
          },
          {
            "version": "v1.58",
            "date": "26.mar.2013",
            "author": "David Rueda (dr@hsb-cad.com)",
            "changes": "Bugfix: Dimensioning of opening was not OK, corrected to be size of rough opening.\n- Applied dimstyle to opening dimensioning (when text on center of opening)"
          },
          {
            "version": "v1.59",
            "date": "07.apr.2013",
            "author": "David Rueda (dr@hsb-cad.com)",
            "changes": "Dimline for openings now split: one delta and one cummulus\n- PropDouble \"Offset for cummulative opening dimension\" added (separate 2 resulting dimlines from item before)\n- Added _kSFVeryTopPlate type to nBmTypeValidForConvex array"
          },
          {
            "version": "v1.60",
            "date": "09.oct.2013",
            "author": "David Rueda (dr@hsb-cad.com)",
            "changes": "Running dimension values now is offset from _Pt0 instead from element's origin\n- Running dimension lines now is offset from _Pt0 instead from element's origin\n- Added \"Show Delta Opening Dimension\" (yes/no) property"
          },
          {
            "version": "v1.61",
            "date": "11.oct.2013",
            "author": "David Rueda (dr@hsb-cad.com)",
            "changes": "Added \"Show Element Dimension\" (Yes/No) property\n- Show jacks length at side of beam center\n- Applied formatUnit jacks length\n- Applied formatUnit rough opening size\n- Applied formatUnit header/sill length"
          }
        ],
        "settingsFiles": [],
        "dependencies": []
      },
      "tokens_used": 8773,
      "error": null
    },
    "2": {
      "success": true,
      "data": {
        "usageEnvironment": {
          "primarySpace": "PaperSpace",
          "supportsPaperSpace": true,
          "isShopDrawingScript": true,
          "isMultipageScript": true,
          "detectionEvidence": "Found PropString sSpace(22,sArSpace,T(\"|Drawing space|\")) where sArSpace contains \"|paper space|\" and \"|shopdraw multipage|\". Script uses transformBy(ms2ps) to convert coordinates from Model Space to Paper Space before drawing entities (Dim, DimLine). Filename 'GE_PLOT_A4_LAYOUT.mcr' and logic indicate generation of 2D drawing layouts."
        },
        "prerequisites": {
          "requiredEntities": [
            "GenBeam",
            "Element"
          ],
          "minimumBeams": 1,
          "requiredSpace": "Paper Space or Shopdraw Multipage Layout",
          "requiredSettings": []
        }
      },
      "tokens_used": 7869,
      "error": null
    },
    "3": {
      "success": true,
      "data": {
        "raw_content": "```json\n{\n  \"commandLine\": {\n    \"insertionFlow\": [],\n    \"keywordOptions\": []\n  },\n  \"dialogs\": [],\n  \"opmProperties\": [\n    {\n      \"index\": 22,\n      \"variable\": \"sSpace\",\n      \"type\": \"PropString\",\n      \"displayName\": \"|Drawing space|\",\n      \"defaultValue\": \"|paper space|\",\n      \"inputType\": \"dropdown\",\n      \"options\": [\n        \"|paper space|\",\n        \"|shopdraw multipage|\"\n      ],\n      \"category\": null,\n      \"description\": null\n    },\n    {\n      \"index\": 0,\n      \"variable\": \"strShowDim\",\n      \"type\": \"PropString\",\n      \"displayName\": \"Show Left Dimension List\",\n      \"defaultValue\": \"3\",\n      \"inputType\": \"dropdown\",\n      \"options\": [\n        \"Start\",\n       "
      },
      "tokens_used": 10896,
      "error": null
    },
    "4": {
      "success": false,
      "data": {},
      "tokens_used": 0,
      "error": "Request timeout after retries"
    },
    "5": {
      "success": true,
      "data": {
        "workflowDiagram": [
          "1. Script launched via command or catalog insertion.",
          "2. If _bOnInsert (first insertion): User prompted to select an Element or GenBeams.",
          "3. User selects entity(ies) (or script uses previously assigned GenBeam).",
          "4. Script reads and categorizes all beams within the selected Element/GenBeams into types: Standard, Angled, Openings, Blocking, Jacks, Cripples, etc.",
          "5. Script calculates coordinate transformations (Model Space to Paper Space or Shopdraw Multipage) based on 'Drawing space' property.",
          "6. Script executes layout generation in a loop (typically for each Element/Sheet if Multi-page, or just once for Paper Space):",
          "   a. Calculates outline and bounding box.",
          "   b. Draws the panel outline.",
          "   c. Conditionally draws Sheets/Outlines based on filter properties.",
          "   d. Conditionally draws and dimensions Angle Plates (Top/Bottom) based on property settings.",
          "   e. Conditionally dimensions Studs based on 'Show Left Dimension List' and orientation.",
          "   f. Conditionally dimensions Openings (Vertical and Horizontal) based on specific location properties and delta/cumulative settings.",
          "   g. Conditionally dimensions Blocking based on 'Show Blocking Dim' and alignment settings.",
          "   h. Conditionally shows Window/Door descriptions and sizes based on properties.",
          "   i. Draws Running Dimensions (if enabled).",
          "   j. Draws Diagonal Dimensions (if enabled).",
          "7. Drawing entities are committed to the database."
        ],
        "conditionalBranches": [
          {
            "condition": "Selection Mode (Insert vs Edit)",
            "path1": {
              "name": "Insert Mode",
              "steps": [
                "Prompt user to select Element/Beams.",
                "Assign selected entity to script instance.",
                "Execute full recalculation."
              ]
            },
            "path2": {
              "name": "Edit Mode",
              "steps": [
                "Skip selection prompts.",
                "Use existing entity assignment.",
                "Execute full recalculation based on changed properties."
              ]
            }
          },
          {
            "condition": "Value of 'Drawing space' property (Paper Space vs Shopdraw Multipage)",
            "path1": {
              "name": "Paper Space",
              "steps": [
                "User may be prompted for an insertion point in Model Space.",
                "Script transforms geometry to Paper Space coordinates.",
                "Script draws entities directly in the active Layout."
              ]
            },
            "path2": {
              "name": "Shopdraw Multipage",
              "steps": [
                "Script operates within the hsbCAD shopdrawing environment.",
                "Generates layout for specific sheets automatically based on internal sheet data."
              ]
            }
          },
          {
            "condition": "Show Left Dimension List (Start/End/Center/None)",
            "path1": {
              "name": "Dimension Left",
              "steps": [
                "Iterate through studs/beams.",
                "Generate dimension points based on alignment (Start/End/Center).",
                "Draw dimension line on the left side of the element."
              ]
            },
            "path2": {
              "name": "Do Not Dimension Left",
              "steps": [
                "Skip left side dimensioning logic."
              ]
            }
          },
          {
            "condition": "Show Vertical Dim Names (Yes/No)",
            "path1": {
              "name": "Show Names",
              "steps": [
                "Retrieve text labels for Blocking, Opening, Wall Height.",
                "Insert text labels near vertical dimension lines."
              ]
            },
            "path2": {
              "name": "Hide Names",
              "steps": [
                "Suppress text label generation for vertical dimensions."
              ]
            }
          },
          {
            "condition": "Vertical Opening Dimension Location (Right/Center/Left/None)",
            "path1": {
              "name": "Right Side",
              "steps": [
                "Calculate vertical dimensions on the right side of the opening."
              ]
            },
            "path2": {
              "name": "Center",
              "steps": [
                "Calculate vertical dimensions in the center of the opening."
              ]
            },
            "path3": {
              "name": "Left Side",
              "steps": [
                "Calculate vertical dimensions on the left side of the opening."
              ]
            }
          },
          {
            "condition": "Show Cummulative/Delta Opening Dimension",
            "path1": {
              "name": "Show Cumulative",
              "steps": [
                "Calculate cumulative sum of opening widths.",
                "Draw running dimension line for openings."
              ]
            },
            "path2": {
              "name": "Show Delta",
              "steps": [
                "Calculate individual opening widths.",
                "Draw dimension lines for each specific opening width."
              ]
            }
          },
          {
            "condition": "Blocking Dimline alignment (Left/Right)",
            "path1": {
              "name": "Left Side",
              "steps": [
                "Draw blocking dimensions on the left of the element.",
                "Apply offset specific to left side."
              ]
            },
            "path2": {
              "name": "Right Side",
              "steps": [
                "Draw blocking dimensions on the right of the element."
              ]
            }
          }
        ],
        "validationRules": [
          {
            "check": "Valid Element or GenBeam selected",
            "errorMessage": "No valid element selected or assigned.",
            "recovery": "Select a valid timber wall element or beam and run script again."
          },
          {
            "check": "Beams found within Element",
            "errorMessage": "Element contains no beams.",
            "recovery": "Check element composition or select a different element."
          }
        ],
        "postInsertionActions": [
          {
            "action": "Modify Layout Properties",
            "how": "OPM (Object Properties Manager) / Properties Palette",
            "effect": "Changes dimension styles (Studs, Openings), toggles visibility of outlines/dimensions, adjusts offsets and scales. Script recalculates automatically."
          },
          {
            "action": "Change Drawing Space",
            "how": "OPM - 'Drawing space' dropdown",
            "effect": "Switches output target between current Paper Space layout and the hsbCAD Shopdraw multipage generation system."
          },
          {
            "action": "Filter Content",
            "how": "OPM - 'Filter sheets by material' or 'Include Beam With BeamCode'",
            "effect": "Shows/Hides specific sheets or beams in the dimensioning and drawing output."
          }
        ]
      },
      "tokens_used": 9446,
      "error": null
    },
    "6": {
      "success": false,
      "data": {},
      "tokens_used": 0,
      "error": "Request timeout after retries"
    }
  }
}