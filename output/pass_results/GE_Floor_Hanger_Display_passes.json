{
  "filename": "GE_Floor_Hanger_Display.mcr",
  "status": "completed",
  "total_tokens": 34166,
  "processing_time": 500.7926549911499,
  "passes": {
    "1": {
      "success": true,
      "data": {
        "header": {
          "type": "",
          "numBeamsReq": null,
          "keywords": [],
          "majorVersion": null,
          "minorVersion": null,
          "dxaOut": null,
          "implInsert": null
        },
        "description": "",
        "versionHistory": [],
        "settingsFiles": [],
        "dependencies": []
      },
      "tokens_used": 4524,
      "error": null
    },
    "2": {
      "success": true,
      "data": {
        "usageEnvironment": {
          "primarySpace": "ModelSpace",
          "supportsPaperSpace": false,
          "isShopDrawingScript": false,
          "isMultipageScript": false,
          "detectionEvidence": "The script uses getBeam() prompts for user input and constructs 3D Body objects using Display dp(154). It does not use ShopDrawing specific classes like _Viewport or sd_*, nor does it reference #Type E or drawing generation logic."
        },
        "prerequisites": {
          "requiredEntities": [
            "GenBeam"
          ],
          "minimumBeams": 2,
          "requiredSpace": "Model Space with at least two existing beams to select (Male and Female).",
          "requiredSettings": []
        }
      },
      "tokens_used": 3562,
      "error": null
    },
    "3": {
      "success": true,
      "data": {
        "commandLine": {
          "insertionFlow": [
            {
              "step": 1,
              "function": "getBeam",
              "promptOriginal": "\\nSelect Male Beam",
              "condition": "_bOnInsert",
              "required": true
            },
            {
              "step": 2,
              "function": "getBeam",
              "promptOriginal": "\\nSelect Female Beam",
              "condition": "_bOnInsert",
              "required": true
            }
          ],
          "keywordOptions": []
        },
        "dialogs": [
          {
            "type": "ShowDynamicDialog",
            "trigger": "Insertion (_bOnInsert) via showDialogOnce()",
            "title": null,
            "dataSource": "Property Palette Defaults",
            "features": {
              "searchable": false,
              "multiSelect": false
            }
          }
        ],
        "opmProperties": [
          {
            "index": 1,
            "variable": "stType",
            "type": "PropString",
            "displayName": "Hanger Type",
            "defaultValue": "Heavy Universal",
            "inputType": "dropdown",
            "options": [
              "Heavy Universal",
              "Mini Hanger",
              "Face Hanger",
              "Top Fix"
            ],
            "category": null,
            "description": null
          },
          {
            "index": 2,
            "variable": "stCode",
            "type": "PropString",
            "displayName": "Hanger Code",
            "defaultValue": "",
            "inputType": "text",
            "options": [],
            "category": null,
            "description": null
          },
          {
            "index": 3,
            "variable": "stModel",
            "type": "PropString",
            "displayName": "Hanger Model",
            "defaultValue": "",
            "inputType": "text",
            "options": [],
            "category": null,
            "description": null
          },
          {
            "index": 4,
            "variable": "iPosNum",
            "type": "PropInt",
            "displayName": "PosNum",
            "defaultValue": "Instance Position Number",
            "inputType": "number",
            "options": [],
            "category": null,
            "description": null
          }
        ],
        "contextMenu": [],
        "settingsFiles": []
      },
      "tokens_used": 4856,
      "error": null
    },
    "4": {
      "success": true,
      "data": {
        "scriptPurpose": {
          "summary": "Generates a visual 3D representation of floor joist hangers and exports the corresponding hardware data for BOMs.",
          "category": "Hardware/Connection",
          "typicalUseCase": "Used to visualize and schedule joist hangers connecting floor joists (Male beam) to supporting beams or walls (Female beam)."
        },
        "parameters": [
          {
            "name": "stType",
            "technicalDefault": "Heavy Universal",
            "businessMeaning": "Selects the geometric configuration and style of the hanger (e.g., heavy-duty vs. mini).",
            "validRange": "Heavy Universal, Mini Hanger, Face Hanger, Top Fix",
            "unit": "enum",
            "affectsOutput": "Determines the specific code block used to generate the 3D geometry, altering the presence of top plates, side heights, and face plate shapes."
          },
          {
            "name": "stCode",
            "technicalDefault": "",
            "businessMeaning": "The specific catalog or part code from the hardware supplier.",
            "validRange": "Alphanumeric string (e.g., 'HU46/55')",
            "unit": "text",
            "affectsOutput": "Updates the 'Info' field in the BOM map and the Hardware attribute for export to lists/labels."
          },
          {
            "name": "stModel",
            "technicalDefault": "",
            "businessMeaning": "The manufacturer name or product family line.",
            "validRange": "Text string (e.g., 'Simpson Strong-Tie')",
            "unit": "text",
            "affectsOutput": "Updates the 'Type' field in the BOM map and the Hardware model name."
          },
          {
            "name": "iPosNum",
            "technicalDefault": "Instance Position Number",
            "businessMeaning": "System-generated unique identifier for this specific instance of the hanger.",
            "validRange": "Integer (>=0)",
            "unit": "count",
            "affectsOutput": "Read-only; used for tagging and scheduling in the project."
          }
        ],
        "parameterDependencies": [
          {
            "trigger": "Change in stType",
            "effect": "Switches the geometric logic used to draw the body (e.g., 'Heavy Universal' adapts to full beam height, 'Mini Hanger' uses fixed heights).",
            "cascade": [
              "Geometry generation logic",
              "Adaptive dimensions (Height/Width)"
            ]
          },
          {
            "trigger": "Change in Male Beam dimensions (Width/Height)",
            "effect": "The script recalculates the hanger width (dMW) and height (dMH) to fit the selected beam, automatically resizing the visual body.",
            "cascade": [
              "3D Body Width",
              "3D Body Height"
            ]
          }
        ],
        "outputEntities": [
          {
            "type": "3D Visualization (Body)",
            "description": "Constructs a solid 3D representation of the hanger using Display ID 154. It adapts to the Male beam size and the selected Hanger Type style.",
            "appliedTo": "Model Space (connection point between Male and Female beams)"
          },
          {
            "type": "Hardware / BOM Entry",
            "description": "Creates a Hardware object and Map entry containing the Code, Model, and Quantity for reporting and CNC export.",
            "appliedTo": "Project BOM / Production Data"
          }
        ]
      },
      "tokens_used": 7486,
      "error": null
    },
    "5": {
      "success": true,
      "data": {
        "workflowDiagram": [
          "User launches script in Model Space.",
          "[On Insert] Properties Palette opens automatically via showDialogOnce().",
          "[On Insert] Command line prompts: 'Select Male Beam' (Joist to be supported).",
          "[On Insert] Command line prompts: 'Select Female Beam' (Supporting beam/wall).",
          "Script establishes local coordinate system (vX, vY, vZ) from Male beam origin.",
          "Script checks verticality condition (vZ vs vY relative to World Z) to orient hanger correctly.",
          "Script extracts dimensions: Male Width (dMW), Male Height (dMH), and Female Depth (dMF).",
          "Script evaluates 'Hanger Type' (stType) property.",
          "[Conditional Branch] Script executes specific geometry construction block based on Hanger Type.",
          "Script draws the resulting 3D Body using Display 154.",
          "Script exports data: Updates BOM Map (TSLBOM) and Hardware object with Code, Model, and Quantity."
        ],
        "conditionalBranches": [
          {
            "condition": "Script State: Insertion vs. Recalculation",
            "path1": {
              "name": "Insertion Flow (_bOnInsert == true)",
              "steps": [
                "Execute showDialogOnce() to expose Properties Palette.",
                "Prompt user to select Male Beam.",
                "Prompt user to select Female Beam.",
                "Store beam references in internal list."
              ]
            },
            "path2": {
              "name": "Recalculation Flow (_bOnInsert == false)",
              "steps": [
                "Skip input prompts.",
                "Retrieve existing Male and Female beam references from memory.",
                "Re-run coordinate and dimension logic based on current beam positions/sizes.",
                "Redraw 3D Body."
              ]
            }
          },
          {
            "condition": "Beam Orientation Check",
            "path1": {
              "name": "Standard Orientation (Z is more vertical than Y)",
              "steps": [
                "Keep vX, vY, vZ as derived from Male beam.",
                "Use dMH (Height) as vertical hanger dimension."
              ]
            },
            "path2": {
              "name": "Rotated Orientation (Y is more vertical than Z)",
              "steps": [
                "Swap vY and vZ vectors.",
                "Recalculate dimensions so hanger stands upright relative to World Z."
              ]
            }
          },
          {
            "condition": "Hanger Type (stType) Property",
            "path1": {
              "name": "Heavy Universal",
              "steps": [
                "Generate Base Body.",
                "Add Side plates (Full height + 1mm).",
                "Add Face plates.",
                "Add Top straps extending over Female beam.",
                "Mirror and assemble components."
              ]
            },
            "path2": {
              "name": "Mini Hanger",
              "steps": [
                "Generate Base Body.",
                "Add Side plates (Fixed 55mm height).",
                "Add Face plates.",
                "Omit Top straps.",
                "Mirror and assemble components."
              ]
            },
            "path3": {
              "name": "Face Hanger",
              "steps": [
                "Generate Base Body.",
                "Define complex PLine profile for Side.",
                "Extrude Side profile.",
                "Define complex PLine profile for Face.",
                "Extrude Face profile.",
                "Mirror and assemble."
              ]
            },
            "path4": {
              "name": "Top Fix",
              "steps": [
                "Generate Base Body.",
                "Define PLine profile for Side.",
                "Define PLine profile for Face.",
                "Add Top plate.",
                "Mirror and assemble."
              ]
            }
          }
        ],
        "validationRules": [
          {
            "check": "User Input at 'Select Male Beam' prompt",
            "errorMessage": "Implicit (Script terminates or halts if selection is cancelled/invalid)",
            "recovery": "User must restart command and select a valid GenBeam."
          },
          {
            "check": "User Input at 'Select Female Beam' prompt",
            "errorMessage": "Implicit (Script terminates or halts if selection is cancelled/invalid)",
            "recovery": "User must restart command and select a valid GenBeam."
          },
          {
            "check": "Beam Dimensions",
            "errorMessage": "None explicit in code (Relies on GenBeam returning valid dD results)",
            "recovery": "Ensure selected beams are valid 3D solids with volume."
          }
        ],
        "postInsertionActions": [
          {
            "action": "Change Hanger Geometry",
            "how": "Properties Palette (OPM) -> 'Hanger Type' dropdown",
            "effect": "Deletes old 3D Body and constructs a new one using the logic for the selected type (Heavy, Mini, Face, Top)."
          },
          {
            "action": "Update BOM / Label Data",
            "how": "Properties Palette (OPM) -> 'Hanger Code' or 'Hanger Model'",
            "effect": "Updates the BOM Map ('Info' and 'Type' fields) and Hardware object for reports/labels. Does not alter geometry."
          },
          {
            "action": "Resize Hanger (Dynamic)",
            "how": "Grip edit or modify the Male Beam (change width/height)",
            "effect": "Script recalculates dMW and dMH; the 3D Body automatically stretches to fit the new beam size."
          },
          {
            "action": "Reposition Hanger",
            "how": "Move the Male Beam or Female Beam",
            "effect": "Script updates origin (_Pt0) and coordinate system; 3D Body moves to maintain connection."
          }
        ]
      },
      "tokens_used": 8126,
      "error": null
    },
    "6": {
      "success": true,
      "data": {
        "markdown": "# GE_Floor_Hanger_Display.mcr\n\n## Overview\nThis script creates a 3D visual representation of floor joist hangers connecting a joist (Male beam) to a supporting beam or wall (Female beam). It automatically adapts the hanger size to fit the beam dimensions and exports hardware data (Code/Model) for BOMs and production labels.\n\n## Usage Environment\n| Space | Supported | Notes |\n|-------|-----------|-------|\n| Model Space | Yes | This script must be used in the 3D model. |\n| Paper Space | No | |\n| Shop Drawing | No | This script does not generate 2D drawings directly. |\n\n## Prerequisites\n- **Required Entities:** Two existing beams (`GenBeam`).\n- **Minimum Beam Count:** 2\n  1. **Male Beam:** The joist being supported.\n  2. **Female Beam:** The supporting beam or wall plate.\n- **Required Settings:** None.\n\n## Usage Steps\n\n### Step 1: Launch Script\nCommand: `TSLINSERT` â†’ Select `GE_Floor_Hanger_Display.mcr`\n\n### Step 2: Select Male Beam\n```\nCommand Line: Select Male Beam\nAction: Click on the floor joist (the beam that will sit inside the hanger).\n```\n\n### Step 3: Select Female Beam\n```\nCommand Line: Select Female Beam\nAction: Click on the supporting beam or wall plate that the hanger attaches to.\n```\n\n### Step 4: Configure Properties\nAfter selection, the Properties Palette will open automatically.\n1. Select the **Hanger Type** from the dropdown (e.g., \"Heavy Universal\", \"Mini Hanger\").\n2. Enter the **Hanger Code** and **Hanger Model** for BOM reporting.\n3. The 3D hanger body will automatically generate based on your inputs.\n\n## Properties Panel Parameters\n\n| Parameter | Type | Default | Description |\n|-----------|------|---------|-------------|\n| Hanger Type | dropdown | Heavy Universal | Determines the geometric style of the hanger. Options: Heavy Universal, Mini Hanger, Face Hanger, Top Fix. |\n| Hanger Code | text | [Blank] | The specific part code from your supplier (e.g., 'HU46/55'). This appears in BOMs and labels. |\n| Hanger Model | text | [Blank] | The manufacturer name or product family. |\n| PosNum | number | Instance ID | A read-only system-generated number identifying this specific instance. |\n\n## Right-Click Menu Options\n\n| Menu Item | Description |\n|-----------|-------------|\n| Properties | Opens the Properties Palette to modify Hanger Type, Code, or Model. |\n| (Standard Options) | Delete, Move, Rotate, etc. |\n\n## Settings Files\n- **Filename:** None\n- **Location:** N/A\n- **Purpose:** This script relies entirely on direct user input and beam geometry; no external XML settings files are required.\n\n## Tips\n- **Dynamic Resizing:** If you use grips to stretch or change the size of the Male beam (joist), the hanger will automatically update its width and height to match.\n- **Switching Types:** You can change the visual style of the hanger at any time by selecting it and changing the \"Hanger Type\" dropdown in the Properties Palette.\n- **Data Export:** Ensure you fill in the \"Hanger Code\" and \"Hanger Model\" fields immediately after insertion to ensure your BOMs and labels are accurate.\n\n## FAQ\n- **Q: Why did the hanger change shape after I edited the beam?**\n  A: The script is designed to be parametric. If you modify the width or height of the joist (Male beam), the hanger geometry automatically recalculates to fit the new size.\n- **Q: Can I use this on a rotated beam?**\n  A: Yes. The script checks the orientation of the beams and adjusts the coordinate system so the hanger stands upright relative to the world, regardless of the beam's rotation.\n- **Q: How do I get the hanger information on my material list?**\n  A: Enter the supplier details in the \"Hanger Code\" and \"Hanger Model\" properties. The script writes this data to the BOM Map and Hardware attributes automatically."
      },
      "tokens_used": 5612,
      "error": null
    }
  }
}